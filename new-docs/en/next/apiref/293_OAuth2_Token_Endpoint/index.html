<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>OAuth 2.0 Token Endpoint · </title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="## Overview"/><meta name="docsearch:version" content="next"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="OAuth 2.0 Token Endpoint · "/><meta property="og:type" content="website"/><meta property="og:url" content="https://personium.github.io/"/><meta property="og:description" content="## Overview"/><meta property="og:image" content="https://personium.github.io/images/header-icon.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://personium.github.io/img/undraw_tweetstorm.svg"/><link rel="shortcut icon" href="/images/favicon.ico"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="alternate" type="application/atom+xml" href="https://personium.github.io/blog/atom.xml" title=" Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://personium.github.io/blog/feed.xml" title=" Blog RSS Feed"/><link rel="stylesheet" href="/docusaurus_css/custom.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/en"><img class="logo" src="/img/logo-quantify-light.png" alt=""/><h2 class="headerTitleWithLogo"></h2></a><a href="/en/versions"><h3>next</h3></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/docs/en/README" target="_self">Documentation</a></li><li class=""><a href="/docs/en/apiref/000_Rest_API_Reference" target="_self">API Reference</a></li><li class=""><a href="/blog/" target="_self">News</a></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="/img/language.svg" alt="Languages icon"/>English</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/new-docs/ja/next/apiref/293_OAuth2_Token_Endpoint">日本語</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(event) {
          event.preventDefault();

          if (languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 id="__docusaurus" class="postHeaderTitle">OAuth 2.0 Token Endpoint</h1></header><article><div><span><h2><a class="anchor" aria-hidden="true" id="overview"></a><a href="#overview" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Overview</h2>
<p>An API endpoint that issues access tokens to access various APIs in the cell. It complies with the OAuth 2.0 specification, it authenticates users and applications in various ways and issues tokens such as access / refresh tokens.</p>
<h3><a class="anchor" aria-hidden="true" id="variation-of-user-authentication"></a><a href="#variation-of-user-authentication" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Variation of user authentication</h3>
<h4><a class="anchor" aria-hidden="true" id="account-holder-authentication-with-password"></a><a href="#account-holder-authentication-with-password" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Account holder authentication with password</h4>
<ul>
<li>Resource Owner Password Credential (ROPC) flow in OAuth 2.0.</li>
<li>Based on the registered account name and password, you can authenticate the owner of the account and receive access token issuance.</li>
<li>As a defense against brute force attack, even if the password is legitimate for that account for one second after failure of authentication, an authentication error will result.</li>
<li>This flow should be used only by cell administration applications such as Cell GUI, which cell owners place high levels of trust.</li>
<li>As described in the OAuth 2.0 specification, general Personium applications should not use this flow.</li>
</ul>
<h4><a class="anchor" aria-hidden="true" id="authentication-of-other-cell-user-by-transcell-access-token"></a><a href="#authentication-of-other-cell-user-by-transcell-access-token" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Authentication of other cell user by transcell access token</h4>
<ul>
<li>The authentication method corresponding to the SAML 2 assertion flow of the OAuth 2.0 extension.</li>
<li>You can issue an access token by authenticating another cell user by sending a transcell access token addressed to this cell.</li>
<li>Re-authentication of the application is required here even if application authentication has been undergone when issuing a transcell access token to be transmitted.</li>
</ul>
<h4><a class="anchor" aria-hidden="true" id="continuation-of-user-authentication-by-refresh-token-transmission"></a><a href="#continuation-of-user-authentication-by-refresh-token-transmission" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Continuation of user authentication by refresh token transmission</h4>
<ul>
<li>By sending a refresh token, it is possible to receive a new access token that inherited the user authentication state received when the refresh token was issued.</li>
<li>Re-authentication of the application is required here even if application authentication has been undergone when issuing a refresh token to be transmitted.</li>
<li>Applications cannot be switched at token refresh by sending client_id different from the originally used one when the refresh token is issued.</li>
<li>Use OpenID Connect ID tokens in cases that authenticated state should be transferred form one app to another, such as single-sign-on from a cell application to a general application.</li>
<li>Access tokens or refresh tokens should not be shared or exchanged among applications.</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="information-transmission-for-application-authentication"></a><a href="#information-transmission-for-application-authentication" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Information transmission for application authentication</h3>
<ul>
<li>Personium uses OAuth's client authentication framework to authenticate the application.</li>
<li>Personium uses the schema URI of the application as client_id. In many cases the schema URI is the URL of the applet.</li>
<li>Personium uses an application authentication token as client_secret.</li>
<li>Information transmission for application authentication is not mandatory.</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="variation-of-issue-token-specification"></a><a href="#variation-of-issue-token-specification" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Variation of issue token specification</h3>
<h4><a class="anchor" aria-hidden="true" id="issuing-an-access-token"></a><a href="#issuing-an-access-token" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Issuing an access token</h4>
<p>If there is no parameter specified as p_target, it will issue a valid access token (cell local access token) in this cell.</p>
<h4><a class="anchor" aria-hidden="true" id="issuing-a-transcell-access-token"></a><a href="#issuing-a-transcell-access-token" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Issuing a Transcell Access Token</h4>
<p>By specifying the URL of another cell by using the parameter called p_target, we issue a Transcell access token for accessing other cells</p>
<h3><a class="anchor" aria-hidden="true" id="other-variations"></a><a href="#other-variations" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Other variations</h3>
<h4><a class="anchor" aria-hidden="true" id="issuing-cookies"></a><a href="#issuing-cookies" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Issuing cookies</h4>
<ul>
<li>If p_cookie is specified as a true value, cookies that are valid only in this cell are issued.</li>
<li>This cookie alone does not substitute for the access token, but by using it together with the character string &quot;cookie_peer&quot; issued at the same time, it has the same effect as the access token.</li>
<li>When you get a resource on this cell, access this URL by adding this value with a query parameter called cookie_peer to the URL so that it handles the same as access token transmission only when correspondence with cookies sent at the same time is obtained.</li>
<li>With this, it is possible to display private media only to authorized users using tags such as HTML img video audio.</li>
<li>Cookies that are issued are valid only in this cell and can not be used in combination with p_target, which is a token acquisition parameter for accessing other cells.</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="record-of-authentication-history"></a><a href="#record-of-authentication-history" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Record of authentication history</h3>
<p>In case of password authentication (when &quot;password&quot; is set at the time of request as grant_type), the last authentication date and number of authentication failure are recorded as authentication history.<br>
An account that does not record authentication history can be set in <a href="/new-docs/en/next/apiref/291_Cell_Change_Property">Target cell property setting</a>.</p>
<p>Target cell property setting</p>
<pre><code class="hljs css language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">p:accountsnotrecordingauthhistory</span>&gt;</span>{Account name(can specify multiple items separated by commas)}<span class="hljs-tag">&lt;/<span class="hljs-name">p:accountsnotrecordingauthhistory</span>&gt;</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="request"></a><a href="#request" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Request</h2>
<h3><a class="anchor" aria-hidden="true" id="request-url"></a><a href="#request-url" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Request URL</h3>
<pre><code class="hljs"><span class="hljs-template-variable">{CellURL}</span><span class="xml">/__token
</span></code></pre>
<h3><a class="anchor" aria-hidden="true" id="request-method"></a><a href="#request-method" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Request Method</h3>
<p>POST</p>
<h3><a class="anchor" aria-hidden="true" id="request-query"></a><a href="#request-query" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Request Query</h3>
<table>
<thead>
<tr><th style="text-align:left">Query Name</th><th style="text-align:left">Overview</th><th style="text-align:left">Effective Value</th><th style="text-align:left">Required</th><th style="text-align:left">Notes</th></tr>
</thead>
<tbody>
<tr><td style="text-align:left">p_cookie_peer</td><td style="text-align:left">Cookie Authentication Value</td><td style="text-align:left">The cookie authentication value returned from the server during authentication</td><td style="text-align:left">No</td><td style="text-align:left">Valid only if no Authorization header specified<br>Specify this when cookie authentication information is to be used</td></tr>
</tbody>
</table>
<h3><a class="anchor" aria-hidden="true" id="request-header"></a><a href="#request-header" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Request Header</h3>
<table>
<thead>
<tr><th style="text-align:left">Item Name</th><th style="text-align:left">Overview</th><th style="text-align:left">Format</th><th style="text-align:left">Required</th><th style="text-align:left">Effective Value</th></tr>
</thead>
<tbody>
<tr><td style="text-align:left">Authorization</td><td style="text-align:left">Specifies client authentication information in the Basic authentication format</td><td style="text-align:left">Basic {String}</td><td style="text-align:left">No</td><td style="text-align:left">As defined in OAuth2.0 spec, client authentication can be performed using Basic auth format in this header. Just send base64url Encoded value of the string {{Schema Authenticator's source URL}: {Token paid out from the schema authentication source}} followed by the fixed string &quot;Basic . If request body has client_assertion or client_assertion_type parameters, then they will have the priority. On the other hand, the setting of the authorization header takes precedence over client_id and client_secret in the request body.</td></tr>
<tr><td style="text-align:left">Content-Type</td><td style="text-align:left">Specifies the request body format</td><td style="text-align:left">application/x-www-form-urlencoded</td><td style="text-align:left">No</td><td style="text-align:left">[application/x-www-form-urlencoded]by default</td></tr>
</tbody>
</table>
<h3><a class="anchor" aria-hidden="true" id="request-body"></a><a href="#request-body" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Request Body</h3>
<table>
<thead>
<tr><th style="text-align:left">Item Name</th><th style="text-align:left">Overview</th><th style="text-align:left">Format</th><th style="text-align:left">Required</th><th style="text-align:left">Effective Value</th></tr>
</thead>
<tbody>
<tr><td style="text-align:left">grant_type</td><td style="text-align:left">grant type defined in OAuth 2.0  (RFC6749)</td><td style="text-align:left">String</td><td style="text-align:left">Yes</td><td style="text-align:left">password<br>urn:x-personium:oidc:google<br>urn:ietf:params:oauth:grant-type:saml2-bearer<br>authorization_code<br>refresh_token</td></tr>
<tr><td style="text-align:left">username</td><td style="text-align:left">User name</td><td style="text-align:left">String</td><td style="text-align:left">Yes(When grant_type = password)</td><td style="text-align:left">Registered user name</td></tr>
<tr><td style="text-align:left">password</td><td style="text-align:left">Password</td><td style="text-align:left">String</td><td style="text-align:left">Yes(When grant_type = password)</td><td style="text-align:left">Registered password</td></tr>
<tr><td style="text-align:left">assertion</td><td style="text-align:left">Transcell token target</td><td style="text-align:left">String</td><td style="text-align:left">Yes(When grant_type=urn:ietf:params:oauth:grant-type:saml2-bearer)</td><td style="text-align:left">A valid transacell access token</td></tr>
<tr><td style="text-align:left">code</td><td style="text-align:left">Authorization Code</td><td style="text-align:left">String</td><td style="text-align:left">Yes(When grant_type = authorization_code)</td><td style="text-align:left">Valid authorization code</td></tr>
<tr><td style="text-align:left">refresh_token</td><td style="text-align:left">Refresh token</td><td style="text-align:left">String</td><td style="text-align:left">Yes(When grant_type=refresh_token)</td><td style="text-align:left">Effective refresh token</td></tr>
<tr><td style="text-align:left">id_token</td><td style="text-align:left">Token ID</td><td style="text-align:left">JSON Web Token</td><td style="text-align:left">Yes(grant_type=urn:x-personium:oidc:For google)</td><td style="text-align:left">JWT Formed ID Token</td></tr>
<tr><td style="text-align:left">p_target</td><td style="text-align:left">Issue target</td><td style="text-align:left">String</td><td style="text-align:left">No</td><td style="text-align:left">Where to use the token to be paid (cell URL)<br>If specified, it becomes transcellation token authentication</td></tr>
<tr><td style="text-align:left">client_assertion_type</td><td style="text-align:left">Type of client_assertion</td><td style="text-align:left">String</td><td style="text-align:left">No</td><td style="text-align:left">Only valid value is &quot;urn:ietf:params:oauth:grant-type:saml2-bearer&quot; defined in RFC7522. When this parameter or client_assertion is specified, then client authentication will be performed in the manner defined in RFC7522, and the content of Authorization header or client_sercret is neglected.</td></tr>
<tr><td style="text-align:left">client_assertion</td><td style="text-align:left">Application authentication token</td><td style="text-align:left">String</td><td style="text-align:left">No</td><td style="text-align:left">An application authentication token issued from an application cell, etc. When this parameter and client_assertion_type are specified, then client authentication will be performed in the manner defined in RFC7522, and the content of Authorization header or client_sercret is neglected.</td></tr>
<tr><td style="text-align:left">client_id</td><td style="text-align:left">Application schema URI</td><td style="text-align:left">String</td><td style="text-align:left">Yes(When grant_type = authorization_code)</td><td style="text-align:left">In many cases App store URL<br>When specified with client_secret Is issued application-certified token<br>At the same time, if the same information is transmitted in the Authorization header, the setting of the Authorization header takes precedence</td></tr>
<tr><td style="text-align:left">client_secret</td><td style="text-align:left">Application authentication token</td><td style="text-align:left">String</td><td style="text-align:left">No</td><td style="text-align:left">An application authentication token issued from an application cell, etc. When specified with client_id, issue an application-certified token. If the same information is transmitted in the Authorization header, the setting of the Authorization header takes precedence.</td></tr>
<tr><td style="text-align:left">scope</td><td style="text-align:left">Scope request</td><td style="text-align:left">String</td><td style="text-align:left">No</td><td style="text-align:left">Space-separated scope identifiers that app requests</td></tr>
<tr><td style="text-align:left">p_owner</td><td style="text-align:left">ULUUT promotion execution Query</td><td style="text-align:left">String</td><td style="text-align:left">No</td><td style="text-align:left">Valid only for true</td></tr>
<tr><td style="text-align:left">p_cookie</td><td style="text-align:left">Authentication cookie issuance option<br>If specified, issue an authentication cookie<br>When p_target is specified, specification of this parameter is ignored</td><td style="text-align:left">String</td><td style="text-align:left">No</td><td style="text-align:left">Valid only for true</td></tr>
<tr><td style="text-align:left">expires_in</td><td style="text-align:left">Access token expiration in (sec)</td><td style="text-align:left">Int<br>1～3600</td><td style="text-align:left">No</td><td style="text-align:left">Specify expiration in of issued access token<br>The default is 3600 (1 hour)</td></tr>
<tr><td style="text-align:left">refresh_token_expires_in</td><td style="text-align:left">Refresh token expiration in (sec)</td><td style="text-align:left">Int<br>1～86400</td><td style="text-align:left">No</td><td style="text-align:left">Specify expiration in of issued refresh token<br>The default is 86400 (24 hours)<br>When p_owner is specified, specification of this parameter is ignored</td></tr>
</tbody>
</table>
<h3><a class="anchor" aria-hidden="true" id="request-sample"></a><a href="#request-sample" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Request Sample</h3>
<p>Password authentication</p>
<pre><code class="hljs">grant_type=password<span class="hljs-variable">&amp;username</span>=username<span class="hljs-variable">&amp;password</span>=pass
</code></pre>
<p>Issuing a transcell access token with account owner authentication by password</p>
<pre><code class="hljs">grant_type=password<span class="hljs-variable">&amp;username</span>=username<span class="hljs-variable">&amp;password</span>=pass<span class="hljs-variable">&amp;p_target</span>=https:<span class="hljs-comment">//cell1.unit1.example/</span>
</code></pre>
<p>Issuing application-authenticated access token by password owner authentication and application authentication token sending</p>
<pre><code class="hljs">grant_type=password<span class="hljs-variable">&amp;username</span>=username<span class="hljs-variable">&amp;password</span>=pass<span class="hljs-variable">&amp;client_id</span>=https:<span class="hljs-comment">//app-cell1.unit1.example/</span>
<span class="hljs-variable">&amp;client_secret</span>=WjzDmvJ...(snip)..<span class="hljs-number">.4</span>nHgo

</code></pre>
<p>Account holder authentication by Google ID issued Open ID Connect Id Token</p>
<pre><code class="hljs">grant_type=<span class="hljs-string">urn:</span>x-<span class="hljs-string">personium:</span><span class="hljs-string">oidc:</span>google&amp;id_token=IDTOKEN
</code></pre>
<p>Refreshing tokens with refresh tokens</p>
<pre><code class="hljs">grant_type=<span class="hljs-string">urn:</span><span class="hljs-string">ietf:</span><span class="hljs-string">params:</span><span class="hljs-string">oauth:</span>grant-<span class="hljs-string">type:</span>saml2-bearer&amp;assertion=WjzDmvJ...(snip)..<span class="hljs-number">.4</span>nHgo
</code></pre>
<p>Cookies are also issued by password owner authentication</p>
<pre><code class="hljs">grant_type=password<span class="hljs-variable">&amp;username</span>=username<span class="hljs-variable">&amp;password</span>=pass<span class="hljs-variable">&amp;p_cookie</span>=true
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="response"></a><a href="#response" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Response</h2>
<h3><a class="anchor" aria-hidden="true" id="response-code"></a><a href="#response-code" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Response Code</h3>
<p>200</p>
<h3><a class="anchor" aria-hidden="true" id="response-header"></a><a href="#response-header" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Response Header</h3>
<table>
<thead>
<tr><th style="text-align:left">Item Name</th><th style="text-align:left">Overview</th><th style="text-align:left">Notes</th></tr>
</thead>
<tbody>
<tr><td style="text-align:left">Content-Type</td><td style="text-align:left">application/json</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left">Set-Cookie</td><td style="text-align:left">Cookie authentication information (p_cookie)</td><td style="text-align:left">Only when setting cookie issue option (p_cookie) at request</td></tr>
</tbody>
</table>
<h3><a class="anchor" aria-hidden="true" id="response-body"></a><a href="#response-body" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Response Body</h3>
<table>
<thead>
<tr><th style="text-align:left">Item Name</th><th style="text-align:left">Overview</th><th style="text-align:left">Notes</th></tr>
</thead>
<tbody>
<tr><td style="text-align:left">access_token</td><td style="text-align:left">Access token</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left">refresh_token</td><td style="text-align:left">Refresh token</td><td style="text-align:left">*If p_owner is set at the time of request, it will not be returned</td></tr>
<tr><td style="text-align:left">token_type</td><td style="text-align:left">Bearer</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left">scope</td><td style="text-align:left">scopes that are granted to the token issued upon the requet</td><td style="text-align:left">Multiple scopes may be returned using space-separated syntax</td></tr>
<tr><td style="text-align:left">expires_in</td><td style="text-align:left">Access token expiration in (sec)</td><td style="text-align:left">Expiration date set at the time of request<br>The default is 3600 (1 hour)</td></tr>
<tr><td style="text-align:left">refresh_token_expires_in</td><td style="text-align:left">Refresh token expiration in (sec)</td><td style="text-align:left">Expiration date set at the time of request<br>The default is 86400 (24 hours)<br>*If p_owner is set at the time of request, it will not be returned</td></tr>
<tr><td style="text-align:left">id_token</td><td style="text-align:left">id_token available with OpenID Connect</td><td style="text-align:left">Return only if<br>grant_type=authorization_code and<br>scope of code is openid</td></tr>
<tr><td style="text-align:left">p_cookie_peer</td><td style="text-align:left">Cookie Authentication Value</td><td style="text-align:left">Authentication value specified at the time of cookie authentication<br>*Return only when the cookie issue option (p_cookie) is set at the time of request</td></tr>
<tr><td style="text-align:left">last_authenticated</td><td style="text-align:left">Last authentication date and time</td><td style="text-align:left">Last authentication date and time (UNIX time of long type)<br>initial authentication is null<br>*Return only when password is set as authorization type (grant_type) at the time of request</td></tr>
<tr><td style="text-align:left">failed_count</td><td style="text-align:left">Number of authentication failures</td><td style="text-align:left">Number of consecutive failures in password authentication since last authentication<br>*Return only when password is set as authorization type (grant_type) at the time of request</td></tr>
</tbody>
</table>
<h3><a class="anchor" aria-hidden="true" id="response-sample"></a><a href="#response-sample" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Response Sample</h3>
<pre><code class="hljs css language-JSON">{
  <span class="hljs-attr">"access_token"</span>: <span class="hljs-string">"AA~PBDc...(snip)...FrTjA"</span>,
  <span class="hljs-attr">"refresh_token_expires_in"</span>: <span class="hljs-number">86400</span>,
  <span class="hljs-attr">"refresh_token"</span>: <span class="hljs-string">"RA~uELM...(snip)...yWMoQ"</span>,
  <span class="hljs-attr">"token_type"</span>: <span class="hljs-string">"Bearer"</span>,
  <span class="hljs-attr">"scope"</span>: <span class="hljs-string">"root"</span>,
  <span class="hljs-attr">"expires_in"</span>: <span class="hljs-number">3600</span>,
  <span class="hljs-attr">"last_authenticated"</span>: <span class="hljs-number">1486462510467</span>,
  <span class="hljs-attr">"failed_count"</span>: <span class="hljs-number">2</span>
}
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="authentication-failed"></a><a href="#authentication-failed" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Authentication failed</h3>
<p>Return an error response. Refer to the &quot;Authentication API&quot; of <a href="/new-docs/en/next/apiref/004_Error_Messages">Error Message List</a>.<br>
The response body is as follows.</p>
<table>
<thead>
<tr><th style="text-align:left">Item Name</th><th style="text-align:left">Overview</th><th style="text-align:left">Notes</th></tr>
</thead>
<tbody>
<tr><td style="text-align:left">error</td><td style="text-align:left">OAUTH error code</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left">error_description</td><td style="text-align:left">[{Message code}] - {Message}</td><td style="text-align:left">Returns a string that combines the message code and the message.</td></tr>
<tr><td style="text-align:left">access_token</td><td style="text-align:left">Access token</td><td style="text-align:left">Return only when the message code is &quot;PR401-AN-0001&quot;.<br>Return the access token that can only change the password.</td></tr>
<tr><td style="text-align:left">url</td><td style="text-align:left">URL</td><td style="text-align:left">Return only when the message code is &quot;PR401-AN-0001&quot;.<br>The URL of the password change API is returned.</td></tr>
<tr><td style="text-align:left">last_authenticated</td><td style="text-align:left">Last authentication date and time</td><td style="text-align:left">Return only when the message code is &quot;PR401-AN-0001&quot;</td></tr>
<tr><td style="text-align:left">failed_count</td><td style="text-align:left">Number of authentication failures</td><td style="text-align:left">Return only when the message code is &quot;PR401-AN-0001&quot;</td></tr>
</tbody>
</table>
<h2><a class="anchor" aria-hidden="true" id="curl-command"></a><a href="#curl-command" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>cURL Command</h2>
<h3><a class="anchor" aria-hidden="true" id="account-holder-authentication"></a><a href="#account-holder-authentication" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Account holder authentication</h3>
<pre><code class="hljs css language-sh">curl <span class="hljs-string">"https://cell1.unit1.example/__token"</span> -X POST -i \
-d <span class="hljs-string">'grant_type=password&amp;username=user1&amp;password=pass'</span>
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="other-cell-user-authentication"></a><a href="#other-cell-user-authentication" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Other cell user authentication</h3>
<pre><code class="hljs css language-sh">curl <span class="hljs-string">"https://cell1.unit1.example/__token"</span> -X POST -i \
-d <span class="hljs-string">'grant_type=urn:ietf:params:oauth:grant-type:saml2-bearer&amp;assertion=WjzDmvJ...(snip)...4nHgo'</span>
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="token-refresh"></a><a href="#token-refresh" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Token Refresh</h3>
<pre><code class="hljs css language-sh">curl <span class="hljs-string">"https://cell1.unit1.example/__token"</span> -X POST -i \
-d <span class="hljs-string">'grant_type=refresh_token&amp;refresh_token=RA~uELM...(snip)...yWMoQ'</span>
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="account-holder--application-authentication"></a><a href="#account-holder--application-authentication" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Account holder + Application authentication</h3>
<pre><code class="hljs css language-sh">curl <span class="hljs-string">"https://cell1.unit1.example/__token"</span> -X POST -i \
-d <span class="hljs-string">'grant_type=password&amp;username=name1&amp;password=pass&amp;client_id=\
https://app-cell1.unit1.example/&amp;client_secret=WjzDmvJ...(snip)...4nHgo'</span>
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="issuing-transcell-access-token-for-other-cell-by-other-cell-user-authentication"></a><a href="#issuing-transcell-access-token-for-other-cell-by-other-cell-user-authentication" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Issuing transcell access token for other cell by other cell user authentication</h3>
<pre><code class="hljs css language-sh">curl <span class="hljs-string">"https://cell1.unit1.example/__token"</span> -X POST -i \
-d <span class="hljs-string">'grant_type=urn:ietf:params:oauth:grant-type:saml2-bearer&amp;assertion=\
WjzDmvJ...(snip)...4nHgo&amp;p_target=https://cell1.unit1.example/'</span>
</code></pre>
</span></div></article></div><div class="docs-prevnext"></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#overview">Overview</a><ul class="toc-headings"><li><a href="#variation-of-user-authentication">Variation of user authentication</a></li><li><a href="#information-transmission-for-application-authentication">Information transmission for application authentication</a></li><li><a href="#variation-of-issue-token-specification">Variation of issue token specification</a></li><li><a href="#other-variations">Other variations</a></li><li><a href="#record-of-authentication-history">Record of authentication history</a></li></ul></li><li><a href="#request">Request</a><ul class="toc-headings"><li><a href="#request-url">Request URL</a></li><li><a href="#request-method">Request Method</a></li><li><a href="#request-query">Request Query</a></li><li><a href="#request-header">Request Header</a></li><li><a href="#request-body">Request Body</a></li><li><a href="#request-sample">Request Sample</a></li></ul></li><li><a href="#response">Response</a><ul class="toc-headings"><li><a href="#response-code">Response Code</a></li><li><a href="#response-header">Response Header</a></li><li><a href="#response-body">Response Body</a></li><li><a href="#response-sample">Response Sample</a></li><li><a href="#authentication-failed">Authentication failed</a></li></ul></li><li><a href="#curl-command">cURL Command</a><ul class="toc-headings"><li><a href="#account-holder-authentication">Account holder authentication</a></li><li><a href="#other-cell-user-authentication">Other cell user authentication</a></li><li><a href="#token-refresh">Token Refresh</a></li><li><a href="#account-holder--application-authentication">Account holder + Application authentication</a></li><li><a href="#issuing-transcell-access-token-for-other-cell-by-other-cell-user-authentication">Issuing transcell access token for other cell by other cell user authentication</a></li></ul></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/images/favicon.ico" alt="" width="66" height="58"/></a><div><h5>Documentation</h5><a href="https://personium.io/docs/en/overview/001_Introduction.html">Introduction</a><a href="https://personium.io/docs/en/server-operator/">Server Software Operator&#x27;s Guide</a><a href="https://personium.io/docs/en/app-developer/">Application Developer&#x27;s Guide</a><a href="https://personium.io/docs/en/apiref/current/000_Rest_API_Reference.html">API Reference</a></div><div><h5>Community</h5><a href="https://personium-io.slack.com/">Slack</a><a href="https://github.com/personium">GitHub</a><a href="https://twitter.com/personium" target="_blank" rel="noreferrer noopener">Twitter</a><div class="social"><a href="https://twitter.com/personium" class="twitter-follow-button">Follow @personium</a></div></div><div><h5>More</h5><a href="/blog">News</a><a href="https://drive.google.com/drive/u/1/folders/1VWGpfCbPOLY2TCa7Lh2jbcsZ5Bp0WV4q">Draft Docs</a></div></section><a href="https://personium.io/" target="_blank" rel="noreferrer noopener" class="fbOpenSource"><img src="/img/logo-quantify-light.png" alt="Personium Project" width="170" height="45"/></a><section class="copyright">Copyright © 2020 Personium Project</section></footer></div><script>window.twttr=(function(d,s, id){var js,fjs=d.getElementsByTagName(s)[0],t=window.twttr||{};if(d.getElementById(id))return t;js=d.createElement(s);js.id=id;js.src='https://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js, fjs);t._e = [];t.ready = function(f) {t._e.push(f);};return t;}(document, 'script', 'twitter-wjs'));</script></body></html>