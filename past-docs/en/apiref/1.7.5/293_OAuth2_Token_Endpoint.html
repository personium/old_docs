<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <!-- default template -->
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <link rel="icon" href="/images/favicon.ico" type="image/x-icon"/>
  <title>293_OAuth2_Token_Endpoint</title>
  <style type="text/css">
div.sourceLine, a.sourceLine { display: inline-block; min-height: 1.25em; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; }
@media print {
code.sourceCode { white-space: pre-wrap; }
div.sourceLine, a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource div.sourceLine, .numberSource a.sourceLine
  { position: relative; }
pre.numberSource div.sourceLine::before, .numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em; }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; color: #aaaaaa;  padding-left: 4px; }
@media screen {
a.sourceLine::before { text-decoration: underline; color: initial; }
}
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.bn { color: #40a070; } /* BaseN */
code span.fl { color: #40a070; } /* Float */
code span.ch { color: #4070a0; } /* Char */
code span.st { color: #4070a0; } /* String */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.ot { color: #007020; } /* Other */
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.fu { color: #06287e; } /* Function */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code span.cn { color: #880000; } /* Constant */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.ss { color: #bb6688; } /* SpecialString */
code span.im { } /* Import */
code span.va { color: #19177c; } /* Variable */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.op { color: #666666; } /* Operator */
code span.bu { } /* BuiltIn */
code span.ex { } /* Extension */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.at { color: #7d9029; } /* Attribute */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
  </style>
  <script type="text/javascript">
      var path = location.pathname.split('/');
      var pathRoot = [ path[0], path[1], '' ].join('/');
      var pathLang = [ path[0], path[1], path[2] , ''].join('/');

      //load style sheets
      document.write('<link rel="stylesheet" href="' + pathRoot + 'personium.css" type="text/css" />');
      document.write('<link rel="stylesheet" href="' + pathLang + 'locale.css" type="text/css" />');
      //load personium_docs.js
      var ps = document.createElement('script');
      ps.src = pathRoot + 'personium_docs.js';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(ps, s);
    
      //load apiref_versions.js
      ps2 = document.createElement('script');
      ps2.src = pathRoot + 'apiref_versions.js';
      s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(ps2, s);

  </script>
  <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
  
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
  <header>
    <nav>
    <div id="logo"><a href="/"><img src="/images/logo-quantify-dark.png" /></a></div>
    <ul>
      <li class="submenu">
        <a href="" >Introduction</a>
        <ul>
            <li><a href="javascript:p.toPage('/overview/001_Introduction.html');">What's Personium?</a></li>
            <li><a href="javascript:p.toPage('/user_guide/001_Personium_Architecture.html');">Architecture</a></li>
            <li><a href="javascript:p.toPage('/user_guide/008_Glossary.html');">Glossary</a></li>
        </ul>
      </li>
      <li class="submenu">
        <a href="" >User Guide</a>
        <ul>
            <li><a href="javascript:p.toPage('/app-developer/');">for App Developer</a></li>
            <li><a href="javascript:p.toPage('/cell-client-developer/');">for Cell App Developer</a></li>
            <li><a href="javascript:p.toPage('/unit-administrator/');">for Unit Administrator</a></li>
            <li><a href="javascript:p.toPage('/server-operator/');">for Server Software Operator</a></li>
            <li><a href="javascript:p.toPage('/document-writer/');">for Documentation Contributor</a></li>
            <li><a href="javascript:p.toPage('/plugin-developer/');">for Server Plugin Developer</a></li>
            <li><a href="javascript:p.toPage('/software-developer/');">for Server Developer</a></li>
        </ul>
      </li>
      <li class="submenu">
        <a href="" >API Reference</a>
        <ul id="api-ref-list">
            <li><a href="javascript:p.toPage('/user_guide/990_Old_Version_API_Ref.html');">older versions</a></li>
        </ul>
      </li>
      <li class="submenu">
        <a href="" >Languages</a>
        <ul>
            <li><a href="javascript:p.setLang('en');">English</a></li>
            <li><a href="javascript:p.setLang('ja');">Japanese</a></li>
        </ul>
      </li>
    </ul>
    </nav>
  </header>

<div id="container">
<h1>OAuth2.0 Token Endpoint</h1>
<h2>Overview</h2>
<p>An API endpoint that issues access tokens to access various APIs in the cell. It complies with the OAuth 2.0 specification, it authenticates users and applications in various ways and issues access tokens and refresh tokens.</p>
<h3>Variation of user authentication</h3>
<h4>Account holder authentication with password</h4>
<ul>
<li>Resource Owner Password Credential (ROPC) flow in OAuth 2.0.</li>
<li>Based on the registered account name and password, you can authenticate the owner of the account and receive access token issuance.</li>
<li>As a defense against brute force attack, even if the password is legitimate for that account for one second after failure of authentication, an authentication error will result.</li>
<li>This flow should be used only by the cell application, which is the premise that cell owners place high levels of trust.</li>
<li>As described in the OAuth 2.0 specification, general Personium applications should not use this flow.</li>
</ul>
<h4>Authentication of other cell user by transcell access token</h4>
<ul>
<li>The authentication method corresponding to the SAML 2 assertion flow of the OAuth 2.0 extension.</li>
<li>You can issue an access token by authenticating another cell user by sending a transcell access token addressed to this cell.</li>
<li>Re-authentication of the application is required here even if application authentication has been undergone when issuing a transcell access token to be transmitted.</li>
</ul>
<h4>Continuation of user authentication by refresh token transmission</h4>
<ul>
<li>By sending a refresh token, it is possible to receive a new access token that inherited the user authentication state received when the refresh token was issued.</li>
<li>Re-authentication of the application is required here even if application authentication has been undergone when issuing a refresh token to be transmitted.</li>
<li>In Personium, applications can be switched by sending client_id and client_secret of different applications at token refresh.</li>
<li>This is for transferring processing from a cell application to a general application, which is a premise that the cell owner places a high level of trust, and should not share or exchange access tokens or refresh tokens among general applications.</li>
</ul>
<h3>Information transmission for application authentication</h3>
<ul>
<li>Personium uses OAuth's client authentication framework to authenticate the application.</li>
<li>Personium uses the schema URI of the application as client_id. In many cases the schema URI is the URL of the applet.</li>
<li>Personium uses an application authentication token as client_secret.</li>
<li>Information transmission for application authentication is not mandatory.</li>
</ul>
<h3>Variation of issue token specification</h3>
<h4>Issuing an access token</h4>
<p>If there is no parameter specified as p_target, it will issue a valid access token (cell local access token) in this cell.</p>
<h4>Issuing a Transcell Access Token</h4>
<p>By specifying the URL of another cell by using the parameter called p_target, we issue a Transcell access token for accessing other cells</p>
<h3>Other variations</h3>
<h4>Issuing cookies</h4>
<ul>
<li>If p_cookie is specified as a true value, cookies that are valid only in this cell are issued.</li>
<li>This cookie alone does not substitute for the access token, but by using it together with the character string &quot;cookie_peer&quot; issued at the same time, it has the same effect as the access token.</li>
<li>When you get a resource on this cell, access this URL by adding this value with a query parameter called cookie_peer to the URL so that it handles the same as access token transmission only when correspondence with cookies sent at the same time is obtained.</li>
<li>With this, it is possible to display private media only to authorized users using tags such as HTML img video audio.</li>
<li>Cookies that are issued are valid only in this cell and can not be used in combination with p_target, which is a token acquisition parameter for accessing other cells.</li>
</ul>
<h2>Request</h2>
<h3>Request URL</h3>
<pre><code>{CellName}/__token</code></pre>
<h3>Request Method</h3>
<p>POST</p>
<h3>Request Query</h3>
<table style="width:28%;">
<colgroup>
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 5%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Query Name</th>
<th style="text-align: left;">Overview</th>
<th style="text-align: left;">Effective Value</th>
<th style="text-align: left;">Required</th>
<th style="text-align: left;">Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">p_cookie_peer</td>
<td style="text-align: left;">Cookie Authentication Value</td>
<td style="text-align: left;">The cookie authentication value returned from the server during authentication</td>
<td style="text-align: left;">No</td>
<td style="text-align: left;">Valid only if no Authorization header specified<br>Specify this when cookie authentication information is to be used</td>
</tr>
</tbody>
</table>
<h3>Request Header</h3>
<table style="width:28%;">
<colgroup>
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 5%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Item Name</th>
<th style="text-align: left;">Overview</th>
<th style="text-align: left;">Format</th>
<th style="text-align: left;">Required</th>
<th style="text-align: left;">Effective Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Authorization</td>
<td style="text-align: left;">Specifies authentication information in the OAuth 2.0 format</td>
<td style="text-align: left;">Basic {String}</td>
<td style="text-align: left;">No</td>
<td style="text-align: left;">If you specify Base64 Encode value for {{Schema Authenticator's source URL}: {Token paid out from the schema authentication source}}, it becomes schema authentication<br>At the above setting, if there is a setting of client_id and client_secret in the request body, the setting of the authorization header takes precedence</td>
</tr>
<tr class="even">
<td style="text-align: left;">Content-Type</td>
<td style="text-align: left;">Specifies the request body format</td>
<td style="text-align: left;">application/x-www-form-urlencoded</td>
<td style="text-align: left;">No</td>
<td style="text-align: left;">[application/x-www-form-urlencoded]by default</td>
</tr>
</tbody>
</table>
<h3>Request Body</h3>
<table style="width:28%;">
<colgroup>
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 5%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Item Name</th>
<th style="text-align: left;">Overview</th>
<th style="text-align: left;">Format</th>
<th style="text-align: left;">Required</th>
<th style="text-align: left;">Effective Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">grant_type</td>
<td style="text-align: left;">Authentication type</td>
<td style="text-align: left;">String</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: left;">password<br>urn:x-personium:oidc:google<br>urn:ietf:params:oauth:grant-type:saml2-bearer<br>authorization_code<br>refresh_token</td>
</tr>
<tr class="even">
<td style="text-align: left;">username</td>
<td style="text-align: left;">User name</td>
<td style="text-align: left;">String</td>
<td style="text-align: left;">Yes(When grant_type = password)</td>
<td style="text-align: left;">Registered user name</td>
</tr>
<tr class="odd">
<td style="text-align: left;">password</td>
<td style="text-align: left;">Password</td>
<td style="text-align: left;">String</td>
<td style="text-align: left;">Yes(When grant_type = password)</td>
<td style="text-align: left;">Registered password</td>
</tr>
<tr class="even">
<td style="text-align: left;">assertion</td>
<td style="text-align: left;">Transcell token target</td>
<td style="text-align: left;">String</td>
<td style="text-align: left;">Yes(When grant_type=urn:ietf:params:oauth:grant-type:saml2-bearer)</td>
<td style="text-align: left;">A valid transacell access token</td>
</tr>
<tr class="odd">
<td style="text-align: left;">code</td>
<td style="text-align: left;">Code</td>
<td style="text-align: left;">String</td>
<td style="text-align: left;">Yes(When grant_type = authorization_code)</td>
<td style="text-align: left;">Registered code</td>
</tr>
<tr class="even">
<td style="text-align: left;">refresh_token</td>
<td style="text-align: left;">Refresh token</td>
<td style="text-align: left;">String</td>
<td style="text-align: left;">Yes(When grant_type=refresh_token)</td>
<td style="text-align: left;">Effective refresh token</td>
</tr>
<tr class="odd">
<td style="text-align: left;">id_token</td>
<td style="text-align: left;">Token ID</td>
<td style="text-align: left;">JSON Web Token</td>
<td style="text-align: left;">Yes(grant_type=urn:x-personium:oidc:For google)</td>
<td style="text-align: left;">JWT Formed ID Token</td>
</tr>
<tr class="even">
<td style="text-align: left;">p_target</td>
<td style="text-align: left;">Issue target</td>
<td style="text-align: left;">String</td>
<td style="text-align: left;">No</td>
<td style="text-align: left;">Where to use the token to be paid (cell URL)<br>If specified, it becomes transcellation token authentication</td>
</tr>
<tr class="odd">
<td style="text-align: left;">client_id</td>
<td style="text-align: left;">Application schema URI</td>
<td style="text-align: left;">String</td>
<td style="text-align: left;">Yes(When grant_type = authorization_code)</td>
<td style="text-align: left;">In many cases App store URL<br>When specified with client_secret Is issued application-certified token<br>At the same time, if the same information is transmitted in the Authorization header, the setting of the Authorization header takes precedence</td>
</tr>
<tr class="even">
<td style="text-align: left;">client_secret</td>
<td style="text-align: left;">Application authentication token</td>
<td style="text-align: left;">String</td>
<td style="text-align: left;">No</td>
<td style="text-align: left;">An application authentication token issued from an application cell or the like<br>When specified with client_id Issue an application-certified token<br>At the same time, if the same information is transmitted in the Authorization header, the setting of the Authorization header takes precedence</td>
</tr>
<tr class="odd">
<td style="text-align: left;">p_owner</td>
<td style="text-align: left;">ULUUT promotion execution Query</td>
<td style="text-align: left;">String</td>
<td style="text-align: left;">No</td>
<td style="text-align: left;">Valid only for true</td>
</tr>
<tr class="even">
<td style="text-align: left;">p_cookie</td>
<td style="text-align: left;">Authentication cookie issuance option<br>If specified, issue an authentication cookie<br>When p_target is specified, specification of this parameter is ignored</td>
<td style="text-align: left;">String</td>
<td style="text-align: left;">No</td>
<td style="text-align: left;">Valid only for true</td>
</tr>
</tbody>
</table>
<h3>Request Sample</h3>
<p>Password authentication</p>
<pre><code>grant_type=password&amp;username=username&amp;password=pass</code></pre>
<p>Issuing a transcell access token with account owner authentication by password</p>
<pre><code>grant_type=password&amp;username=username&amp;password=pass&amp;p_target=https://cell1.unit1.example/</code></pre>
<p>Issuing application-authenticated access token by password owner authentication and application authentication token sending</p>
<pre><code>grant_type=password&amp;username=username&amp;password=pass&amp;client_id=https://app-cell1.unit1.example/
&amp;client_secret=WjzDmvJ...(snip)...4nHgo
</code></pre>
<p>Account holder authentication by Google ID issued Open ID Connect Id Token</p>
<pre><code>grant_type=urn:x-personium:oidc:google&amp;id_token=IDTOKEN</code></pre>
<p>Refreshing tokens with refresh tokens</p>
<pre><code>grant_type=urn:ietf:params:oauth:grant-type:saml2-bearer&amp;assertion=WjzDmvJ...(snip)...4nHgo</code></pre>
<p>Cookies are also issued by password owner authentication</p>
<pre><code>grant_type=password&amp;username=username&amp;password=pass&amp;p_cookie=true</code></pre>
<h2>Response</h2>
<h3>Response Code</h3>
<p>200</p>
<h3>Response Header</h3>
<table style="width:17%;">
<colgroup>
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 5%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Item Name</th>
<th style="text-align: left;">Overview</th>
<th style="text-align: left;">Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Content-Type</td>
<td style="text-align: left;">application/json</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">Set-Cookie</td>
<td style="text-align: left;">Cookie authentication information (p_cookie)</td>
<td style="text-align: left;">Only when setting cookie issue option (p_cookie) at request</td>
</tr>
</tbody>
</table>
<h3>Response Body</h3>
<table style="width:17%;">
<colgroup>
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 5%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Item Name</th>
<th style="text-align: left;">Overview</th>
<th style="text-align: left;">Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">access_token</td>
<td style="text-align: left;">Access token</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">refresh_token_expires_in</td>
<td style="text-align: left;">Refresh token expiration date</td>
<td style="text-align: left;">24 hours (86400 seconds)<br>*If p_owner is set at the time of request, it will not be returned</td>
</tr>
<tr class="odd">
<td style="text-align: left;">refresh_token</td>
<td style="text-align: left;">Refresh token</td>
<td style="text-align: left;">*If p_owner is set at the time of request, it will not be returned</td>
</tr>
<tr class="even">
<td style="text-align: left;">token_type</td>
<td style="text-align: left;">Bearer</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">expires_in</td>
<td style="text-align: left;">Access token expiration date</td>
<td style="text-align: left;">1 hour (3600 seconds)</td>
</tr>
<tr class="even">
<td style="text-align: left;">id_token</td>
<td style="text-align: left;">id_token available with OpenID Connect</td>
<td style="text-align: left;">Return only if<br>grant_type=authorization_code and<br>scope of code is openid</td>
</tr>
<tr class="odd">
<td style="text-align: left;">p_cookie_peer</td>
<td style="text-align: left;">Cookie Authentication Value</td>
<td style="text-align: left;">Authentication value specified at the time of cookie authentication<br>*Return only when the cookie issue option (p_cookie) is set at the time of request</td>
</tr>
<tr class="even">
<td style="text-align: left;">last_authenticated</td>
<td style="text-align: left;">Last authentication date and time</td>
<td style="text-align: left;">Last authentication date and time（UNIX time of long type）<br>initial authentication is null<br>*Return only when password is set as authorization type (grant_type) at the time of request</td>
</tr>
<tr class="odd">
<td style="text-align: left;">failed_count</td>
<td style="text-align: left;">Number of authentication failures</td>
<td style="text-align: left;">Number of consecutive failures in password authentication since last authentication<br>*Return only when password is set as authorization type (grant_type) at the time of request</td>
</tr>
</tbody>
</table>
<h3>Response Sample</h3>
<pre class="sourceCode json" id="cb8"><code class="sourceCode json"><div class="sourceLine" id="cb8-1" data-line-number="1"><span class="fu">{</span></div>
<div class="sourceLine" id="cb8-2" data-line-number="2">  <span class="dt">&quot;access_token&quot;</span><span class="fu">:</span> <span class="st">&quot;AA~PBDc...(snip)...FrTjA&quot;</span><span class="fu">,</span></div>
<div class="sourceLine" id="cb8-3" data-line-number="3">  <span class="dt">&quot;refresh_token_expires_in&quot;</span><span class="fu">:</span> <span class="dv">86400</span><span class="fu">,</span></div>
<div class="sourceLine" id="cb8-4" data-line-number="4">  <span class="dt">&quot;refresh_token&quot;</span><span class="fu">:</span> <span class="st">&quot;RA~uELM...(snip)...yWMoQ&quot;</span><span class="fu">,</span></div>
<div class="sourceLine" id="cb8-5" data-line-number="5">  <span class="dt">&quot;token_type&quot;</span><span class="fu">:</span> <span class="st">&quot;Bearer&quot;</span><span class="fu">,</span></div>
<div class="sourceLine" id="cb8-6" data-line-number="6">  <span class="dt">&quot;expires_in&quot;</span><span class="fu">:</span> <span class="dv">3600</span><span class="fu">,</span></div>
<div class="sourceLine" id="cb8-7" data-line-number="7">  <span class="dt">&quot;last_authenticated&quot;</span><span class="fu">:</span> <span class="dv">1486462510467</span><span class="fu">,</span></div>
<div class="sourceLine" id="cb8-8" data-line-number="8">  <span class="dt">&quot;failed_count&quot;</span><span class="fu">:</span> <span class="dv">2</span></div>
<div class="sourceLine" id="cb8-9" data-line-number="9"><span class="fu">}</span></div></code></pre>
<h3>Error Messages</h3>
<p>Refer to <a href="004_Error_Messages.html">Error Message List</a></p>
<h2>cURL Command</h2>
<h3>Account holder authentication</h3>
<pre class="sourceCode sh" id="cb9"><code class="sourceCode bash"><div class="sourceLine" id="cb9-1" data-line-number="1"><span class="ex">curl</span> <span class="st">&quot;https://cell1.unit1.example/__token&quot;</span> -X POST -i \</div>
<div class="sourceLine" id="cb9-2" data-line-number="2">-d <span class="st">&#39;grant_type=password&amp;username=user1&amp;password=pass&#39;</span></div></code></pre>
<h3>Other cell user authentication</h3>
<pre class="sourceCode sh" id="cb10"><code class="sourceCode bash"><div class="sourceLine" id="cb10-1" data-line-number="1"><span class="ex">curl</span> <span class="st">&quot;https://cell1.unit1.example/__token&quot;</span> -X POST -i \</div>
<div class="sourceLine" id="cb10-2" data-line-number="2">-d <span class="st">&#39;grant_type=urn:ietf:params:oauth:grant-type:saml2-bearer&amp;assertion=WjzDmvJ...(snip)...4nHgo&#39;</span></div></code></pre>
<h3>Token Refresh</h3>
<pre class="sourceCode sh" id="cb11"><code class="sourceCode bash"><div class="sourceLine" id="cb11-1" data-line-number="1"><span class="ex">curl</span> <span class="st">&quot;https://cell1.unit1.example/__token&quot;</span> -X POST -i \</div>
<div class="sourceLine" id="cb11-2" data-line-number="2">-d <span class="st">&#39;grant_type=refresh_token&amp;refresh_token=RA~uELM...(snip)...yWMoQ&#39;</span></div></code></pre>
<h3>Account holder + Application authentication</h3>
<pre class="sourceCode sh" id="cb12"><code class="sourceCode bash"><div class="sourceLine" id="cb12-1" data-line-number="1"><span class="ex">curl</span> <span class="st">&quot;https://cell1.unit1.example/__token&quot;</span> -X POST -i \</div>
<div class="sourceLine" id="cb12-2" data-line-number="2">-d <span class="st">&#39;grant_type=password&amp;username=name1&amp;password=pass&amp;client_id=\</span></div>
<div class="sourceLine" id="cb12-3" data-line-number="3"><span class="st">https://app-cell1.unit1.example/&amp;client_secret=WjzDmvJ...(snip)...4nHgo&#39;</span></div></code></pre>
<h3>Issuing transcell access token for other cell by other cell user authentication</h3>
<pre class="sourceCode sh" id="cb13"><code class="sourceCode bash"><div class="sourceLine" id="cb13-1" data-line-number="1"><span class="ex">curl</span> <span class="st">&quot;https://cell1.unit1.example/__token&quot;</span> -X POST -i \</div>
<div class="sourceLine" id="cb13-2" data-line-number="2">-d <span class="st">&#39;grant_type=urn:ietf:params:oauth:grant-type:saml2-bearer&amp;assertion=\</span></div>
<div class="sourceLine" id="cb13-3" data-line-number="3"><span class="st">WjzDmvJ...(snip)...4nHgo&amp;p_target=https://cell1.unit1.example/&#39;</span></div></code></pre>
</div>
  <footer><nav>The Personium project is provided under the Apache 2.0 license. </nav></footer>
</body>
</html>
