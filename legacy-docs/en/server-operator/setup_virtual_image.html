<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <!-- default template -->
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <link rel="icon" href="/images/favicon.ico" type="image/x-icon"/>
  <title>setup_virtual_image</title>
  <script type="text/javascript">
      var path = location.pathname.split('/');
      var pathRoot = [ path[0], path[1], '' ].join('/');
      var pathLang = [ path[0], path[1], path[2] , ''].join('/');

      document.write('<link rel="stylesheet" href="' + pathRoot + 'personium.css" type="text/css" />');
      document.write('<link rel="stylesheet" href="' + pathLang + 'locale.css" type="text/css" />');
      var ps = document.createElement('script');
      ps.src = pathRoot + 'personium_docs.js';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(ps, s);
    
      ps2 = document.createElement('script');
      ps2.src = pathRoot + 'apiref_versions.js';
      s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(ps2, s);
  </script>
  <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
  
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
  <header>
    <nav>
    <div id="logo"><a href="/"><img src="https://personium.io/images/logo-quantify-dark.png"></a></div>
    <ul>
      <li class="submenu">
        <a href="#" >Introduction</a>
        <ul>
            <li><a href="javascript:p.toPage('/overview/001_Introduction.html');">What's Personium?</a></li>
            <li><a href="javascript:p.toPage('/user_guide/001_Personium_Architecture.html');">Architecture</a></li>
            <li><a href="javascript:p.toPage('/user_guide/008_Glossary.html');">Glossary</a></li>
        </ul>
      </li>
      <li class="submenu">
        <a href="#" >User Guide</a>
        <ul>
            <li><a href="javascript:p.toPage('/app-developer/');">for App Developer</a></li>
            <li><a href="javascript:p.toPage('/cell-gui-developer/');">for Cell GUI Developer</a></li>
            <li><a href="javascript:p.toPage('/unit-administrator/');">for Unit Administrator</a></li>
            <li><a href="javascript:p.toPage('/server-operator/');">for Server Software Operator</a></li>
            <li><a href="javascript:p.toPage('/document-writer/');">for Documentation Contributor</a></li>
            <li><a href="javascript:p.toPage('/plugin-developer/');">for Server Plugin Developer</a></li>
            <li><a href="javascript:p.toPage('/software-developer/');">for Server Developer</a></li>
        </ul>
      </li>
      <li class="submenu">
        <a href="#" >API Reference</a>
        <ul id="api-ref-list">
            <li><a href="javascript:p.toPage('/user_guide/990_Old_Version_API_Ref.html');">older versions</a></li>
        </ul>
      </li>
      <li class="submenu">
        <a href="#" >Languages</a>
        <ul>
            <li><a href="javascript:p.setLang('en');">English</a></li>
            <li><a href="javascript:p.setLang('ja');">Japanese</a></li>
        </ul>
      </li>
    </ul>
    </nav>
  </header>

<div id="container">
<h2>Getting Started with Personium using Virtual image</h2>
<h2>Overview</h2>
<p>The purpose of this document is to explain high level specification<br />
for constructing Personium unit using VirtualBox virtual image.<br />
This Virtual image is checking the operation with VirtualBox version 1.5.2 later and Windows10.</p>
<h4>Setup procedures</h4>
<ol>
<li><p>Download and install <a href="https://www.virtualbox.org/wiki/Downloads">VirtualBox</a>.</p></li>
<li><p>Please download the image file of the version of Personium unit<br />
you want to build from the following URL.</p>
<ul>
<li>1.6.15<br />
<a href="https://personium.io/mvnrepo/image/personium-unit-image-1.6.15.ova" class="uri">https://personium.io/mvnrepo/image/personium-unit-image-1.6.15.ova</a></li>
</ul></li>
<li><p>Import virtual image into VirtualBox.</p>
<ol>
<li><p>Click &quot;File&quot; - &quot;Import Appliance&quot;.</p></li>
<li><p>Choose a virtual image file to import and click the &quot;Next&quot; button.<br />
<strong>if you want to change the spec,It is also possible to change</strong></p></li>
<li><p>Click the &quot;Import&quot; button.</p></li>
</ol></li>
<li><p>Add following to end of hosts file on your machine.(E.G: C:\Windows\System32\drivers\etc\hosts)</p>
<pre><code>127.0.0.1  personium.example.com</code></pre>
<ul>
<li>If use a proxy environment, Please see <a href="proxy_exclusion_setting.html">Proxy exclusion setting</a>.<br />
</li>
<li>Network setting (optional)
<ul>
<li>Default value is a virtual network (10.0.2.0) dedicated to VirtualBox.<br />
</li>
<li>NAT setting is unnecessary, if it is used only via virtual network.</li>
</ul></li>
</ul></li>
<li><p>Please select the imported virtual image and start it.</p></li>
</ol>
<h4>Confirm Personium</h4>
<p>Virtual server account information</p>
<pre><code>ID  ：root  
PASS：root</code></pre>
<p><strong>Please be sure to change at first login.</strong></p>
<ol>
<li><p>Log in to the virtual server from ssh client such as Teraterm.</p>
<ol>
<li><p>Please enter the following information and click &quot;OK&quot; button.</p>
<pre><code>host   ：localhost  
TCPPort：2221</code></pre></li>
<li><p>Since the ssh confirmation screen is displayed,<br />
please input ID / PASS described in the above account information.</p></li>
</ol></li>
<li><p>Check the information of personium administration account.</p>
<pre><code># cat /personium/unitadmin_account
unitadmin_account=unitadmin
unitudmin_password={password}
Personium_FQDN=personium.example.com</code></pre></li>
<li><p>Verify that your Personium Unit-Manager is up and running.</p>
<ol>
<li>Access the following URL from the browser.<br />
<a href="https://personium.example.com/app-uc-unit-manager/__/html/login.html" class="uri">https://personium.example.com/app-uc-unit-manager/__/html/login.html</a>
<ul>
<li>Please refer to the link for <a href="https://github.com/personium/app-uc-unit-manager">Unit-Manager</a>.</li>
</ul></li>
<li>Enter the following on the login page and click the &quot;sign in&quot; button.
<ul>
<li>Login URL : <a href="https://personium.example.com/unitadmin/" class="uri">https://personium.example.com/unitadmin/</a><br />
</li>
<li>Username : unitadmin<br />
</li>
<li>Password : {password}<br />
<strong>For {password}, ​​please enter the unitadmin_password that you confirmed in step 2 above.</strong></li>
</ul></li>
<li>After successful login, please confirm that the following Cell exists<br />
in &quot;Cell List&quot; on the left side of the screen.
<ul>
<li>app-uc-unit-manager</li>
<li>unitadmin</li>
</ul></li>
</ol></li>
<li><p>Verify that your Personium is up and running.</p>
<ol>
<li><p>Prepare an environment in which the curl command can be executed with localhost.</p></li>
<li><p>Get Unit User Token. Execute the following command.</p>
<pre><code>$ curl &quot;https://personium.example.com/unitadmin/__token&quot; -X POST \
-d &quot;grant_type=password&amp;username=unitadmin&amp;password={password}\
&amp;p_target=https://personium.example.com/&quot; -k  </code></pre></li>
<li><p>Create a Cell. Execute the following command.</p>
<pre><code>$ curl -X POST &quot;https://personium.example.com/__ctl/Cell&quot; -d &quot;{\&quot;Name\&quot;:\&quot;sample\&quot;}&quot; \
-H &quot;Authorization:Bearer {Token}&quot; -H &quot;Accept:application/json&quot; -i -sS -k</code></pre></li>
<li><p>If Personium works fine, 201 response is returned as below. a cell is successfully created!</p>
<pre><code>HTTP/1.1 201
Date: Mon, 28 Jan 2019 01:03:39 GMT
Content-Type: application/json
Content-Length: 245
Connection: keep-alive
Location: https://personium.example.com/__ctl/Cell(&#39;sample&#39;)
DataServiceVersion: 2.0
ETag: W/&quot;1-1548637419191&quot;
X-Personium-Version: 1.6.15
Server: Personium

{&quot;d&quot;:{&quot;results&quot;:{&quot;__metadata&quot;:{&quot;uri&quot;:&quot;https:\/\/personium.example.com\/__ctl\/Cell(&#39;sample&#39;)&quot;,
&quot;etag&quot;:&quot;W\/\&quot;1-1548637419191\&quot;&quot;,&quot;type&quot;:&quot;UnitCtl.Cell&quot;},&quot;Name&quot;:&quot;sample&quot;,
&quot;__published&quot;:&quot;\/Date(1548637419191)\/&quot;,&quot;__updated&quot;:&quot;\/Date(1548637419191)\/&quot;}}}</code></pre></li>
</ol></li>
</ol>
<h5>OS and Middleware on VM</h5>
<ul>
<li><p>OS<br />
CentOS 7.2 x86_64</p></li>
<li><p>Middleware</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Category</th>
<th style="text-align: left;">Name</th>
<th style="text-align: right;">Version</th>
<th style="text-align: left;"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">java</td>
<td style="text-align: left;">AdoptOpenJDK</td>
<td style="text-align: right;">8u192</td>
<td style="text-align: left;">--</td>
</tr>
<tr class="even">
<td style="text-align: left;">tomcat</td>
<td style="text-align: left;">tomcat</td>
<td style="text-align: right;">9.0.10</td>
<td style="text-align: left;">web</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">commons-daemon</td>
<td style="text-align: right;">1.1.0</td>
<td style="text-align: left;">--</td>
</tr>
<tr class="even">
<td style="text-align: left;">nginx</td>
<td style="text-align: left;">nginx</td>
<td style="text-align: right;">1.14.0</td>
<td style="text-align: left;">proxy</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">Headers More</td>
<td style="text-align: right;">0.32</td>
<td style="text-align: left;">--</td>
</tr>
<tr class="even">
<td style="text-align: left;">logback</td>
<td style="text-align: left;">logback</td>
<td style="text-align: right;">1.0.3</td>
<td style="text-align: left;">--</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">slf4j</td>
<td style="text-align: right;">1.6.4</td>
<td style="text-align: left;">--</td>
</tr>
<tr class="even">
<td style="text-align: left;">memcached</td>
<td style="text-align: left;">memcached</td>
<td style="text-align: right;">1.4.21</td>
<td style="text-align: left;">cache</td>
</tr>
<tr class="odd">
<td style="text-align: left;">elasticsearch</td>
<td style="text-align: left;">elasticsearch</td>
<td style="text-align: right;">2.4.1</td>
<td style="text-align: left;">db &amp; search engine</td>
</tr>
</tbody>
</table></li>
</ul>
</div>
  <footer><nav>The Personium project is provided under the Apache 2.0 license. </nav></footer>
</body>
</html>

