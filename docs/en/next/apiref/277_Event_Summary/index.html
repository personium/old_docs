<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Events Overview · </title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="## Event Model"/><meta name="docsearch:version" content="next"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Events Overview · "/><meta property="og:type" content="website"/><meta property="og:url" content="https://personium.github.io/"/><meta property="og:description" content="## Event Model"/><meta property="og:image" content="https://personium.github.io/images/header-icon.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://personium.github.io/img/undraw_tweetstorm.svg"/><link rel="shortcut icon" href="/images/favicon.ico"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="alternate" type="application/atom+xml" href="https://personium.github.io/blog/atom.xml" title=" Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://personium.github.io/blog/feed.xml" title=" Blog RSS Feed"/><link rel="stylesheet" href="/docusaurus_css/custom.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/en"><img class="logo" src="/img/logo-quantify-light.png" alt=""/><h2 class="headerTitleWithLogo"></h2></a><a href="/en/versions"><h3>next</h3></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/ja/README" target="_self">Documentation</a></li><li class=""><a href="/ja/apiref/000_Rest_API_Reference" target="_self">API Reference</a></li><li class=""><a href="/blog/" target="_self">News</a></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="/img/language.svg" alt="Languages icon"/>English</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/docs/ja/next/apiref/277_Event_Summary">日本語</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(event) {
          event.preventDefault();

          if (languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 id="__docusaurus" class="postHeaderTitle">Events Overview</h1></header><article><div><span><h2><a class="anchor" aria-hidden="true" id="event-model"></a><a href="#event-model" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Event Model</h2>
<p>It consists of an external event defined by <a href="/docs/en/next/apiref/278_Event_Reception">event reception API</a> and an internal event defined within Personium.</p>
<p><img src="image/eventmodel.png" alt="Event model" title="event model"></p>
<h4><a class="anchor" aria-hidden="true" id="external-event"></a><a href="#external-event" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>External event</h4>
<p>Represents an event to be accepted in <a href="/docs/en/next/apiref/278_Event_Reception">Event reception API</a>.
An event is generated by the event reception API, and the accepted event is output to the event bus.
In the future, it will be possible to relay the reception of events to other cells. In case</p>
<h4><a class="anchor" aria-hidden="true" id="internal-event"></a><a href="#internal-event" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Internal Event</h4>
<p>Indicates processing that is executed based on the state of management data (OData / WebDAV / Service, etc.) held inside Personium.
As a typical internal event, there is a request of Personium API.
When the response of the Personium API is returned, the execution result is output as an event to the event bus.</p>
<h2><a class="anchor" aria-hidden="true" id="event-format"></a><a href="#event-format" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Event Format</h2>
<table>
<thead>
<tr><th style="text-align:left">Item Name</th><th style="text-align:left">Description</th></tr>
</thead>
<tbody>
<tr><td style="text-align:left">Subject</td><td style="text-align:left">It is set from token of Authorization header</td></tr>
<tr><td style="text-align:left">Schema</td><td style="text-align:left">It is set from token of Authorization header</td></tr>
<tr><td style="text-align:left">RequestKey</td><td style="text-align:left">It is set from X-Personium-RequestKey header</td></tr>
<tr><td style="text-align:left">External</td><td style="text-align:left">Flag indicating whether the event is an external event</td></tr>
<tr><td style="text-align:left">Type</td><td style="text-align:left">Type of the event</td></tr>
<tr><td style="text-align:left">Object</td><td style="text-align:left">Object of the event</td></tr>
<tr><td style="text-align:left">Info</td><td style="text-align:left">Information of the event</td></tr>
</tbody>
</table>
<h3><a class="anchor" aria-hidden="true" id="internal-event-definitions"></a><a href="#internal-event-definitions" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Internal Event Definitions</h3>
<p>Type value is defined for each operation.
Type value is normalized. Examples of normalization are below.</p>
<table>
<thead>
<tr><th style="text-align:left">Before</th><th style="text-align:left">After normalization</th></tr>
</thead>
<tbody>
<tr><td style="text-align:left">cellctl.Role.links.Box.create</td><td style="text-align:left">cellctl.Box.links.Role.create</td></tr>
<tr><td style="text-align:left">cellctl.Relation.links.ExtCell.delete</td><td style="text-align:left">cellctl.ExtCell.links.Relation.delete</td></tr>
</tbody>
</table>
<p>Object value basically is set to a URL or a URL with key string. URL is URL with personium-localcell scheme, URL with key string is URL that append key of result of create operation.
For example, when entity of __id='0123' is created, request url and URL with key string are as follows:</p>
<table>
<thead>
<tr><th style="text-align:left">request url</th><th style="text-align:left">URL with key string</th></tr>
</thead>
<tbody>
<tr><td style="text-align:left"><a href="http://personium/cell/box/col/entity">http://personium/cell/box/col/entity</a></td><td style="text-align:left">personium-localcell:/box/col/entity('0123')</td></tr>
</tbody>
</table>
<p>Key string set to Object is normalized. Examples of normalization are below.</p>
<table>
<thead>
<tr><th style="text-align:left">Before</th><th style="text-align:left">After normalization</th></tr>
</thead>
<tbody>
<tr><td style="text-align:left">Role(’role’)</td><td style="text-align:left">Role(Name=’role’, _Box.Name=null)</td></tr>
<tr><td style="text-align:left">Role(_Box.Name=null, Name=’role’)</td><td style="text-align:left">Role(Name=’role’, _Box.Name=null)</td></tr>
<tr><td style="text-align:left">Account(Name=’hoge’)</td><td style="text-align:left">Account(’hoge’)</td></tr>
</tbody>
</table>
<p>Info value basically is set to response code and request url. Request url is exact url in Rest API call and includes arguments.
In update operation, Info is set to updated key string. The key string is used for accessing to updated object.</p>
<table>
<thead>
<tr><th style="text-align:left">Type</th><th style="text-align:left">Object</th><th style="text-align:left">Info</th></tr>
</thead>
<tbody>
<tr><td style="text-align:left">celctl.Role.update</td><td style="text-align:left">personium-localcell:/__ctl/Role(Name='role1', _Box.Name=null)</td><td style="text-align:left">204,(Name='role2', _Box.Name=null)</td></tr>
</tbody>
</table>
<p>Request URL to updated Role object:</p>
<pre><code class="hljs">{CellURL}__ctl/Role(<span class="hljs-attribute">Name</span>=<span class="hljs-string">'role2'</span>, _Box.<span class="hljs-attribute">Name</span>=<span class="hljs-literal">null</span>)
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="cell-level-api"></a><a href="#cell-level-api" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Cell Level API</h4>
<h5><a class="anchor" aria-hidden="true" id="cell-control-object"></a><a href="#cell-control-object" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Cell Control Object</h5>
<table>
<thead>
<tr><th style="text-align:left"></th><th style="text-align:left">Operations</th><th style="text-align:left">Type</th><th style="text-align:left">Object</th><th style="text-align:left">Info</th><th style="text-align:left">Remarks</th></tr>
</thead>
<tbody>
<tr><td style="text-align:left">Basic Operations</td><td style="text-align:left">Create</td><td style="text-align:left">cellctl.xxx.create</td><td style="text-align:left">URL with key string</td><td style="text-align:left">201,Request URL</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left"></td><td style="text-align:left">Retrieve</td><td style="text-align:left">cellctl.xxx.get</td><td style="text-align:left">URL</td><td style="text-align:left">200,Request URL</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left"></td><td style="text-align:left">Retrieve List</td><td style="text-align:left">cellctl.xxx.list</td><td style="text-align:left">URL</td><td style="text-align:left">200,Request URL</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left"></td><td style="text-align:left">Update</td><td style="text-align:left">cellctl.xxx.update</td><td style="text-align:left">URL</td><td style="text-align:left">204,Updated Key string</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left"></td><td style="text-align:left">Delete</td><td style="text-align:left">cellctl.xxx.delete</td><td style="text-align:left">URL</td><td style="text-align:left">204</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left">Linking with other objects</td><td style="text-align:left">Link</td><td style="text-align:left">cellctl.xxx.links.yyy.create</td><td style="text-align:left">URL with key string</td><td style="text-align:left">204</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left"></td><td style="text-align:left">Unlink</td><td style="text-align:left">cellctl.xxx.links.yyy.delete</td><td style="text-align:left">URL</td><td style="text-align:left">204</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left"></td><td style="text-align:left">List Links</td><td style="text-align:left">cellctl.xxx.links.yyy.list</td><td style="text-align:left">URL</td><td style="text-align:left">200,Request URL</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left">Bound Object Manipulation</td><td style="text-align:left">Create</td><td style="text-align:left">cellctl.xxx.navprop.yyy.create</td><td style="text-align:left">URL with key string</td><td style="text-align:left">201,Request URL</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left"></td><td style="text-align:left">Retrieve List</td><td style="text-align:left">cellctl.xxx.navprop.yyy.list</td><td style="text-align:left">URL</td><td style="text-align:left">200,Request URL</td><td style="text-align:left"></td></tr>
</tbody>
</table>
<p>xxx or yyy is the Cell Control Object Name below.</p>
<ul>
<li>Account</li>
<li>Role</li>
<li>ExtCell</li>
<li>Relation</li>
<li>ExtRole</li>
<li>Box</li>
<li>SentMessage</li>
<li>ReceivedMessage</li>
<li>Rule</li>
</ul>
<h5><a class="anchor" aria-hidden="true" id="install-box"></a><a href="#install-box" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Install Box</h5>
<table>
<thead>
<tr><th style="text-align:left">State</th><th style="text-align:left">Type</th><th style="text-align:left">Object</th><th style="text-align:left">Info</th><th style="text-align:left">Remarks</th></tr>
</thead>
<tbody>
<tr><td style="text-align:left">Box installation reception</td><td style="text-align:left">boxinstall</td><td style="text-align:left">URL</td><td style="text-align:left">Response Code</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left">Box installation process in progress</td><td style="text-align:left">PL-BI-1000</td><td style="text-align:left">URL</td><td style="text-align:left">Bar installation started.</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left"></td><td style="text-align:left">PL-BI-1001</td><td style="text-align:left">Entry path in bar file</td><td style="text-align:left">Installation started.</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left"></td><td style="text-align:left">PL-BI-1003</td><td style="text-align:left">Entry path in bar file</td><td style="text-align:left">Installation completed.</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left"></td><td style="text-align:left">PL-BI-1004</td><td style="text-align:left">Entry path in bar file</td><td style="text-align:left">Installation failed({cause}).</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left"></td><td style="text-align:left">PL-BI-1005</td><td style="text-align:left"></td><td style="text-align:left">Unknown error({cause}).</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left">Box Installation Complete</td><td style="text-align:left">PL-BI-0000</td><td style="text-align:left">URL</td><td style="text-align:left">Bar installation completed.</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left"></td><td style="text-align:left">PL-BI-0001</td><td style="text-align:left">URL</td><td style="text-align:left">Bar installation failed({cause}).</td><td style="text-align:left"></td></tr>
</tbody>
</table>
<p>On box installation, operations abount Cell Control object is executed.</p>
<table>
<thead>
<tr><th style="text-align:left"></th><th style="text-align:left">Operations</th><th style="text-align:left">Type</th><th style="text-align:left">Object</th><th style="text-align:left">Info</th><th style="text-align:left">Remarks</th></tr>
</thead>
<tbody>
<tr><td style="text-align:left">Basic Operations</td><td style="text-align:left">Create</td><td style="text-align:left">cellctl.xxx.create</td><td style="text-align:left">URL with key string</td><td style="text-align:left">box install</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left">Linking with other objects</td><td style="text-align:left">Link</td><td style="text-align:left">cellctl.xxx.links.yyy.create</td><td style="text-align:left">URL with key string</td><td style="text-align:left">box install</td><td style="text-align:left"></td></tr>
</tbody>
</table>
<h5><a class="anchor" aria-hidden="true" id="message-exchange-between-cells"></a><a href="#message-exchange-between-cells" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Message Exchange between Cells</h5>
<table>
<thead>
<tr><th style="text-align:left"></th><th style="text-align:left">Operations</th><th style="text-align:left">Type</th><th style="text-align:left">Object</th><th style="text-align:left">Info</th><th style="text-align:left">Remarks</th></tr>
</thead>
<tbody>
<tr><td style="text-align:left">Send a message</td><td style="text-align:left">Send message</td><td style="text-align:left">message.send</td><td style="text-align:left">URL to retrieve SentMessage</td><td style="text-align:left">201</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left"></td><td style="text-align:left">Receive message</td><td style="text-align:left">message.receive</td><td style="text-align:left">URL to retrieve ReceivedMessage</td><td style="text-align:left">201</td><td style="text-align:left">Event is created on the Cell that revieves message</td></tr>
<tr><td style="text-align:left">Change Status</td><td style="text-align:left">Read</td><td style="text-align:left">message.read</td><td style="text-align:left">URL to retrieve ReceivedMessage</td><td style="text-align:left">204</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left"></td><td style="text-align:left">Unread</td><td style="text-align:left">message.unread</td><td style="text-align:left">URL to retrieve ReceivedMessage</td><td style="text-align:left">204</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left"></td><td style="text-align:left">Approve</td><td style="text-align:left">message.approve</td><td style="text-align:left">URL to retrieve ReceivedMessage</td><td style="text-align:left">204</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left"></td><td style="text-align:left">Reject</td><td style="text-align:left">message.reject</td><td style="text-align:left">URL to retrieve ReceivedMessage</td><td style="text-align:left">204</td><td style="text-align:left"></td></tr>
</tbody>
</table>
<p>Examples of URL to retrieve SentMessage and URL to retrieve ReceivedMessage are as follows.</p>
<table>
<thead>
<tr><th style="text-align:left"></th><th style="text-align:left">URL</th></tr>
</thead>
<tbody>
<tr><td style="text-align:left">URL to retrieve SentMessage</td><td style="text-align:left">personium-localcell:/__ctl/SentMessage(’12345’)</td></tr>
<tr><td style="text-align:left">URL to retrieve ReceivedMessage</td><td style="text-align:left">personium-localcell:/__ctl/ReceivedMessage(’12345’)</td></tr>
</tbody>
</table>
<p>On message approval, operations abount Cell Control object is executed.</p>
<table>
<thead>
<tr><th style="text-align:left"></th><th style="text-align:left">Operations</th><th style="text-align:left">Type</th><th style="text-align:left">Object</th><th style="text-align:left">Info</th><th style="text-align:left">Remarks</th></tr>
</thead>
<tbody>
<tr><td style="text-align:left">Basic Operations</td><td style="text-align:left">Create</td><td style="text-align:left">cellctl.ExtCell.create</td><td style="text-align:left">URL with key string</td><td style="text-align:left">approved for message 12345</td><td style="text-align:left">12345 is __id of the message</td></tr>
<tr><td style="text-align:left"></td><td style="text-align:left">Create</td><td style="text-align:left">cellctl.Rule.create</td><td style="text-align:left">URL with key string</td><td style="text-align:left">approved for message 12345</td><td style="text-align:left">12345 is __id of the message</td></tr>
<tr><td style="text-align:left"></td><td style="text-align:left">Delete</td><td style="text-align:left">cellctl.Rule.delete</td><td style="text-align:left">URL</td><td style="text-align:left">approved for message 12345</td><td style="text-align:left">12345 is __id of the message</td></tr>
<tr><td style="text-align:left">Linking with other objects</td><td style="text-align:left">Link</td><td style="text-align:left">cellctl.ExtCell.links.Relation.create</td><td style="text-align:left">URL with key string</td><td style="text-align:left">approved for message 12345</td><td style="text-align:left">12345 is __id of the message</td></tr>
<tr><td style="text-align:left"></td><td style="text-align:left">Link</td><td style="text-align:left">cellctl.ExtCell.links.Role.create</td><td style="text-align:left">URL with key string</td><td style="text-align:left">approved for message 12345</td><td style="text-align:left">12345 is __id of the message</td></tr>
<tr><td style="text-align:left"></td><td style="text-align:left">Unlink</td><td style="text-align:left">cellctl.ExtCell.links.Relation.delete</td><td style="text-align:left">URL</td><td style="text-align:left">approved for message 12345</td><td style="text-align:left">12345 is __id of the message</td></tr>
<tr><td style="text-align:left"></td><td style="text-align:left">Unlink</td><td style="text-align:left">cellctl.ExtCell.links.Role.delete</td><td style="text-align:left">URL</td><td style="text-align:left">approved for message 12345</td><td style="text-align:left">12345 is __id of the message</td></tr>
</tbody>
</table>
<h5><a class="anchor" aria-hidden="true" id="other-functions"></a><a href="#other-functions" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Other functions</h5>
<table>
<thead>
<tr><th style="text-align:left"></th><th style="text-align:left">Operations</th><th style="text-align:left">Type</th><th style="text-align:left">Object</th><th style="text-align:left">Info</th><th style="text-align:left">Remarks</th></tr>
</thead>
<tbody>
<tr><td style="text-align:left">Export</td><td style="text-align:left">Execute</td><td style="text-align:left">cell.export</td><td style="text-align:left">personium-localcell:/__export</td><td style="text-align:left"></td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left">Import</td><td style="text-align:left">Execute</td><td style="text-align:left">cell.import</td><td style="text-align:left">personium-localcell:/__import</td><td style="text-align:left"></td><td style="text-align:left"></td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="box-level-api"></a><a href="#box-level-api" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Box Level API</h4>
<h5><a class="anchor" aria-hidden="true" id="basic-webdav-operations"></a><a href="#basic-webdav-operations" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Basic WebDAV Operations</h5>
<table>
<thead>
<tr><th style="text-align:left">Target</th><th style="text-align:left">Operations</th><th style="text-align:left">Type</th><th style="text-align:left">Object</th><th style="text-align:left">Info</th><th style="text-align:left">Remarks</th></tr>
</thead>
<tbody>
<tr><td style="text-align:left">File</td><td style="text-align:left">Create/Update</td><td style="text-align:left">davfile.update</td><td style="text-align:left">URL</td><td style="text-align:left">204</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left"></td><td style="text-align:left">Retrieve</td><td style="text-align:left">davfile.get</td><td style="text-align:left">URL</td><td style="text-align:left">200</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left"></td><td style="text-align:left">Delete</td><td style="text-align:left">davfile.delete</td><td style="text-align:left">URL</td><td style="text-align:left">204</td><td style="text-align:left"></td></tr>
</tbody>
</table>
<h5><a class="anchor" aria-hidden="true" id="odata-service-collection"></a><a href="#odata-service-collection" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>OData Service Collection</h5>
<h6><a class="anchor" aria-hidden="true" id="data-manipulation"></a><a href="#data-manipulation" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Data Manipulation</h6>
<table>
<thead>
<tr><th style="text-align:left"></th><th style="text-align:left">Operations</th><th style="text-align:left">Type</th><th style="text-align:left">Object</th><th style="text-align:left">Info</th><th style="text-align:left">Remarks</th></tr>
</thead>
<tbody>
<tr><td style="text-align:left">Basic Operations</td><td style="text-align:left">Create</td><td style="text-align:left">odata.create</td><td style="text-align:left">URL with key string</td><td style="text-align:left">201,Request URL</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left"></td><td style="text-align:left">Retrieve</td><td style="text-align:left">odata.get</td><td style="text-align:left">URL</td><td style="text-align:left">200,Request URL</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left"></td><td style="text-align:left">Retrieve List</td><td style="text-align:left">odata.list</td><td style="text-align:left">URL</td><td style="text-align:left">200,Request URL</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left"></td><td style="text-align:left">Update</td><td style="text-align:left">odata.update</td><td style="text-align:left">URL</td><td style="text-align:left">204,Updated key string</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left"></td><td style="text-align:left">Partial Update</td><td style="text-align:left">odata.patch</td><td style="text-align:left">URL</td><td style="text-align:left">204,Updated key string</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left"></td><td style="text-align:left">Delete</td><td style="text-align:left">odata.delete</td><td style="text-align:left">URL</td><td style="text-align:left">204</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left">Linking with other objects</td><td style="text-align:left">Link</td><td style="text-align:left">odata.links.create</td><td style="text-align:left">URL with key string</td><td style="text-align:left">204</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left"></td><td style="text-align:left">Unlink</td><td style="text-align:left">odata.links.delete</td><td style="text-align:left">URL</td><td style="text-align:left">204</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left"></td><td style="text-align:left">List Links</td><td style="text-align:left">odata.links.list</td><td style="text-align:left">URL</td><td style="text-align:left">200,Request URL</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left">Bound Object Manipulation</td><td style="text-align:left">Create</td><td style="text-align:left">odata.navprop.create</td><td style="text-align:left">URL with key string</td><td style="text-align:left">201,Request URL</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left"></td><td style="text-align:left">Retrieve List</td><td style="text-align:left">odata.navprop.list</td><td style="text-align:left">URL</td><td style="text-align:left">200,Request URL</td><td style="text-align:left"></td></tr>
</tbody>
</table>
<h6><a class="anchor" aria-hidden="true" id="schema-definition"></a><a href="#schema-definition" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Schema Definition</h6>
<table>
<thead>
<tr><th style="text-align:left"></th><th style="text-align:left">Operations</th><th style="text-align:left">Type</th><th style="text-align:left">Object</th><th style="text-align:left">Info</th><th style="text-align:left">Remarks</th></tr>
</thead>
<tbody>
<tr><td style="text-align:left">Basic Operations</td><td style="text-align:left">Create</td><td style="text-align:left">odata.xxx.create</td><td style="text-align:left">URL with key string</td><td style="text-align:left">201,Request URL</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left"></td><td style="text-align:left">Retrieve</td><td style="text-align:left">odata.xxx.get</td><td style="text-align:left">URL</td><td style="text-align:left">200,Request URL</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left"></td><td style="text-align:left">Retrieve List</td><td style="text-align:left">odata.xxx.list</td><td style="text-align:left">URL</td><td style="text-align:left">200,Request URL</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left"></td><td style="text-align:left">Update</td><td style="text-align:left">odata.xxx.update</td><td style="text-align:left">URL</td><td style="text-align:left">204,Updated key string</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left"></td><td style="text-align:left">Partial Update</td><td style="text-align:left">odata.xxx.patch</td><td style="text-align:left">URL</td><td style="text-align:left">204,Updated key string</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left"></td><td style="text-align:left">Delete</td><td style="text-align:left">odata.xxx.delete</td><td style="text-align:left">URL</td><td style="text-align:left">204</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left">Linking with other objects</td><td style="text-align:left">Link</td><td style="text-align:left">odata.xxx.links.yyy.create</td><td style="text-align:left">URL with key string</td><td style="text-align:left">204</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left"></td><td style="text-align:left">Unlink</td><td style="text-align:left">odata.xxx.links.yyy.delete</td><td style="text-align:left">URL</td><td style="text-align:left">204</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left"></td><td style="text-align:left">List Links</td><td style="text-align:left">odata.xxx.links.yyy.list</td><td style="text-align:left">URL</td><td style="text-align:left">200,Request URL</td><td style="text-align:left"></td></tr>
</tbody>
</table>
<p>xxx or yyy is the Schema Definition EntitySet Name.</p>
<h5><a class="anchor" aria-hidden="true" id="engine-service-collection"></a><a href="#engine-service-collection" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Engine Service Collection</h5>
<table>
<thead>
<tr><th style="text-align:left">Operations</th><th style="text-align:left">Type</th><th style="text-align:left">Object</th><th style="text-align:left">Info</th><th style="text-align:left">Remarks</th></tr>
</thead>
<tbody>
<tr><td style="text-align:left">Service Execute</td><td style="text-align:left">service.exec</td><td style="text-align:left">URL</td><td style="text-align:left">Response Code</td><td style="text-align:left"></td></tr>
</tbody>
</table>
<h2><a class="anchor" aria-hidden="true" id="processing-events"></a><a href="#processing-events" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Processing events</h2>
<p>It is judged whether or not the event outputted to the event bus matches the condition of the <a href="/docs/en/next/apiref/2A0_Create_Rule">rule</a>, and if it matches, the action described in the rule is executed.
For the action, you can specify:</p>
<ul>
<li>Log output</li>
<li>Script execution</li>
<li>Relay</li>
<li>Event relay</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="matching-with-rule"></a><a href="#matching-with-rule" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Matching with Rule</h3>
<p>Event matches with the rule if all items are true.</p>
<table>
<thead>
<tr><th style="text-align:left">Event</th><th style="text-align:left">Rule</th><th style="text-align:left">method of judge</th><th style="text-align:left">Remarks</th></tr>
</thead>
<tbody>
<tr><td style="text-align:left">Subject</td><td style="text-align:left">EventSubject</td><td style="text-align:left">perfect matching</td><td style="text-align:left">If EventSubject is null, the matching result is true.</td></tr>
<tr><td style="text-align:left">Schema</td><td style="text-align:left">Schema of Box naming with _Box.Name</td><td style="text-align:left">perfect matching</td><td style="text-align:left">If _Box.Name is null, the matching result is true.</td></tr>
<tr><td style="text-align:left">RequestKey</td><td style="text-align:left"></td><td style="text-align:left">It is not used in matching with the rule.</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left">External</td><td style="text-align:left">EventExternal</td><td style="text-align:left">perfect matching</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left">Type</td><td style="text-align:left">EventType</td><td style="text-align:left">forward matching</td><td style="text-align:left">If EventType is null, the matching result is true.</td></tr>
<tr><td style="text-align:left">Object</td><td style="text-align:left">EventObject</td><td style="text-align:left">forward matching</td><td style="text-align:left">If EventObject is null, the matching result is true.</td></tr>
<tr><td style="text-align:left">Info</td><td style="text-align:left">EventInfo</td><td style="text-align:left">forward matching</td><td style="text-align:left">If EventInfo is null, the matching result is true.</td></tr>
</tbody>
</table>
<h3><a class="anchor" aria-hidden="true" id="log-output-action"></a><a href="#log-output-action" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Log output Action</h3>
<p>Log output action output the event to event log file.
Kinds of log output action are as follows:</p>
<table>
<thead>
<tr><th style="text-align:left">Action</th><th style="text-align:left">Description</th></tr>
</thead>
<tbody>
<tr><td style="text-align:left">log<br>log.info</td><td style="text-align:left">Output the event with INFO level.</td></tr>
<tr><td style="text-align:left">log.warn</td><td style="text-align:left">Output the event with WARN level.</td></tr>
<tr><td style="text-align:left">log.error</td><td style="text-align:left">Output the event with ERROR level.</td></tr>
</tbody>
</table>
<p>Event does not include log output level, Log output level is specified by Action.</p>
<h4><a class="anchor" aria-hidden="true" id="rule-example"></a><a href="#rule-example" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Rule example</h4>
<p>When Role operations were executed, output log with INFO level.</p>
<table>
<thead>
<tr><th style="text-align:left">Item name</th><th style="text-align:left">Value</th><th style="text-align:left">Remarks</th></tr>
</thead>
<tbody>
<tr><td style="text-align:left">_Box.Name</td><td style="text-align:left">null</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left">Name</td><td style="text-align:left">output_cellctlRole</td><td style="text-align:left">Not required.</td></tr>
<tr><td style="text-align:left">EventType</td><td style="text-align:left">cellctl.Role.</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left">EventSubject</td><td style="text-align:left">null</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left">EventObject</td><td style="text-align:left">personium-localcell:/__ctl/Role</td><td style="text-align:left">Have the same effect as EventType.</td></tr>
<tr><td style="text-align:left">EventInfo</td><td style="text-align:left">null</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left">EventExternal</td><td style="text-align:left">false</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left">Action</td><td style="text-align:left">log</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left">TargetUrl</td><td style="text-align:left">null</td><td style="text-align:left"></td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="event-log-format"></a><a href="#event-log-format" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Event log format</h4>
<p>The output format is as follows.</p>
<pre><code class="hljs"><span class="hljs-template-variable">{dateTime}</span><span class="xml">,[</span><span class="hljs-template-variable">{level}</span><span class="xml">],</span><span class="hljs-template-variable">{RequestKey}</span><span class="xml">,</span><span class="hljs-template-variable">{External}</span><span class="xml">,</span><span class="hljs-template-variable">{Schema}</span><span class="xml">,</span><span class="hljs-template-variable">{Subject}</span><span class="xml">,</span><span class="hljs-template-variable">{Type}</span><span class="xml">,</span><span class="hljs-template-variable">{Object}</span><span class="xml">,</span><span class="hljs-template-variable">{Info}</span><span class="xml">
</span></code></pre>
<h4><a class="anchor" aria-hidden="true" id="event-log-access-method"></a><a href="#event-log-access-method" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Event log access method</h4>
<p>Since the event log is managed on the WebDAV, access to the event log file is done with the API for WebDAV.</p>
<ul>
<li><a href="/docs/en/next/apiref/284_Retrieve_Log_File_list">Get log file list</a></li>
<li><a href="/docs/en/next/apiref/285_Retrieve_Log_File">Get log file</a></li>
<li><a href="/docs/en/next/apiref/286_Delete_Log_File">Delete Log File</a></li>
</ul>
<h4><a class="anchor" aria-hidden="true" id="event-log-retention-period"></a><a href="#event-log-retention-period" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Event log retention period</h4>
<p>Since the size of the event log file increases according to the event amount, the event log file is rotated by a fixed amount.
The number of generation generations of the rotated event log file is 12 generations maximum.
The maximum size at rotation is set to 50 MB by default, and it can be set by the log setting update API.</p>
<h4><a class="anchor" aria-hidden="true" id="output-example"></a><a href="#output-example" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Output example</h4>
<h5><a class="anchor" aria-hidden="true" id="external-event-output-example"></a><a href="#external-event-output-example" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>External event output example</h5>
<pre><code class="hljs">2013-04-18T14:52:39.778Z,[<span class="hljs-builtin-name">ERROR</span>],<span class="hljs-string">"Req_animal-access_1001"</span>,<span class="hljs-string">"true"</span>,
<span class="hljs-string">"https://app-cell1.unit1.example/"</span>,<span class="hljs-string">"https://unitadmin.unit1.example/#admin"</span>,<span class="hljs-string">"actionData"</span>,
<span class="hljs-string">"/svc/token_keeper"</span>,<span class="hljs-string">"resultData"</span>
2013-04-18T14:52:40.688Z,[<span class="hljs-builtin-name">INFO</span> ],<span class="hljs-string">"Req_animal-access_2001"</span>,<span class="hljs-string">"true"</span>,
<span class="hljs-string">"https://app-cell1.unit1.example/"</span>,<span class="hljs-string">"https://unitadmin.unit1.example/#admin"</span>,<span class="hljs-string">"action"</span>,
<span class="hljs-string">"/svc/token_keeper"</span>,<span class="hljs-string">"result"</span>
2013-04-18T15:01:46.994Z,[<span class="hljs-builtin-name">INFO</span> ],<span class="hljs-string">"Req_animal-access_2001"</span>,<span class="hljs-string">"true"</span>,
<span class="hljs-string">"https://app-cell1.unit1.example/"</span>,<span class="hljs-string">"https://unitadmin.unit1.example/#admin"</span>,<span class="hljs-string">"action"</span>,
<span class="hljs-string">"/svc/token_keeper"</span>,<span class="hljs-string">"result"</span>
2013-04-18T15:06:19.294Z,[<span class="hljs-builtin-name">ERROR</span>],<span class="hljs-string">"Req_animal-access_1001"</span>,<span class="hljs-string">"true"</span>,
<span class="hljs-string">"https://app-cell1.unit1.example/"</span>,<span class="hljs-string">"https://unitadmin.unit1.example/#admin"</span>,<span class="hljs-string">"actionData"</span>,
<span class="hljs-string">"/svc/token_keeper"</span>,<span class="hljs-string">"resultData"</span>
2013-04-18T15:06:23.360Z,[<span class="hljs-builtin-name">INFO</span> ],<span class="hljs-string">"Req_animal-access_2001"</span>,<span class="hljs-string">"true"</span>,
<span class="hljs-string">"https://app-cell1.unit1.example/"</span>,<span class="hljs-string">"https://unitadmin.unit1.example/#admin"</span>,<span class="hljs-string">"action"</span>,
<span class="hljs-string">"/svc/token_keeper"</span>,<span class="hljs-string">"result"</span>
2013-04-18T15:09:18.073Z,[<span class="hljs-builtin-name">ERROR</span>],<span class="hljs-string">"Req_animal-access_1001"</span>,<span class="hljs-string">"true"</span>,
<span class="hljs-string">"https://app-cell1.unit1.example/"</span>,<span class="hljs-string">"https://unitadmin.unit1.example/#admin"</span>,<span class="hljs-string">"actionData"</span>,
<span class="hljs-string">"/svc/token_keeper"</span>,<span class="hljs-string">"resultData"</span>
</code></pre>
<h5><a class="anchor" aria-hidden="true" id="example-of-internal-event-output"></a><a href="#example-of-internal-event-output" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example of internal event output</h5>
<pre><code class="hljs">2013-04-18T14:52:39.779Z,[<span class="hljs-builtin-name">INFO</span> ],<span class="hljs-string">"Req_animal-access_1001"</span>,<span class="hljs-string">"false"</span>,
<span class="hljs-string">"https://app-cell1.unit1.example/"</span>,<span class="hljs-string">"https://app-cell1.unit1.example/#staff"</span>,<span class="hljs-string">"odata.update"</span>,
<span class="hljs-string">"https://homeClinic.unit1.example/box/col/put_blog"</span>,<span class="hljs-string">"204"</span>
2013-04-18T14:52:39.780Z,[<span class="hljs-builtin-name">INFO</span> ],<span class="hljs-string">"Req_animal-access_1001"</span>,<span class="hljs-string">"false"</span>,
<span class="hljs-string">"https://app-cell1.unit1.example/"</span>,<span class="hljs-string">"https://app-cell1.unit1.example/#staff"</span>,<span class="hljs-string">"odata.get"</span>,
<span class="hljs-string">"https://homeClinic.unit1.example/box/col/blog_20130418"</span>,<span class="hljs-string">"200"</span>
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="script-execution-action"></a><a href="#script-execution-action" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Script execution Action</h3>
<p>Script execution action executes an registered <a href="/docs/en/next/apiref/384_Service_Execution">service</a> of one's own cell.
Value of Action is exec.</p>
<h4><a class="anchor" aria-hidden="true" id="rule-example-1"></a><a href="#rule-example-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Rule example</h4>
<p>When a message was received, execute the service set to TargetUrl.</p>
<table>
<thead>
<tr><th style="text-align:left">Item name</th><th style="text-align:left">Value</th><th style="text-align:left">Remarks</th></tr>
</thead>
<tbody>
<tr><td style="text-align:left">_Box.Name</td><td style="text-align:left">null</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left">Name</td><td style="text-align:left">exec_messagereceive</td><td style="text-align:left">Not required.</td></tr>
<tr><td style="text-align:left">EventType</td><td style="text-align:left">message.receive</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left">EventSubject</td><td style="text-align:left">null</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left">EventObject</td><td style="text-align:left">null</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left">EventInfo</td><td style="text-align:left">null</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left">EventExternal</td><td style="text-align:left">false</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left">Action</td><td style="text-align:left">exec</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left">TargetUrl</td><td style="text-align:left">personium-localcell:/box/col/srv</td><td style="text-align:left"></td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="parameters-to-the-service"></a><a href="#parameters-to-the-service" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Parameters to the service</h4>
<p>The service receives parameters by request body and request header.</p>
<table>
<thead>
<tr><th style="text-align:left">Item name</th><th style="text-align:left">Data source</th><th style="text-align:left">Remarks</th></tr>
</thead>
<tbody>
<tr><td style="text-align:left">Subject</td><td style="text-align:left">request body</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left">Schema</td><td style="text-align:left">request body</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left">External</td><td style="text-align:left">request body</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left">Type</td><td style="text-align:left">request body</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left">Object</td><td style="text-align:left">request body</td><td style="text-align:left">It is converted to http or https scheme.</td></tr>
<tr><td style="text-align:left">Info</td><td style="text-align:left">request body</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left">RequestKey</td><td style="text-align:left">request header</td><td style="text-align:left">The key of the header is 'x-personium-requestkey'.</td></tr>
</tbody>
</table>
<p>The service gets parameters from request body as follows.</p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">request</span>) </span>{
  <span class="hljs-keyword">var</span> bodyAsString = request[<span class="hljs-string">"input"</span>].readAll();
  <span class="hljs-keyword">var</span> params = <span class="hljs-built_in">JSON</span>.parse(bodyAsString);
</code></pre>
<p>The service gets parameters from request header as follows.</p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(request)</span> </span>{
  <span class="hljs-keyword">var</span> reqHeaders = request[<span class="hljs-string">"headers"</span>];
  <span class="hljs-keyword">var</span> requestKey = reqHeaders[<span class="hljs-string">'x-personium-requestkey'</span>];
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="handling-token-on-the-service"></a><a href="#handling-token-on-the-service" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Handling token on the service</h4>
<p>Access token is set to Authorization header.</p>
<table>
<thead>
<tr><th style="text-align:left">Item name</th><th style="text-align:left">Value</th></tr>
</thead>
<tbody>
<tr><td style="text-align:left">Subject</td><td style="text-align:left">Subject of the event</td></tr>
<tr><td style="text-align:left">Schema</td><td style="text-align:left">Schema of the event</td></tr>
</tbody>
</table>
<p>Please use  _p.as('client'), _p.as('serviceSubject') or password authentication like _p.as({cellUrl:xxx, userId:xxx, password:xxx}).
Schema of token created by _p.as('serviceSubject') is set to schema of the box where the service is placed.</p>
<h3><a class="anchor" aria-hidden="true" id="relay-action"></a><a href="#relay-action" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Relay Action</h3>
<p>Relay action executes an registered service of other cell.
Value of Action is relay.</p>
<h4><a class="anchor" aria-hidden="true" id="rule-example-2"></a><a href="#rule-example-2" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Rule example</h4>
<p>When an entity of user data was created, execute the service set to TargetUrl.</p>
<table>
<thead>
<tr><th style="text-align:left">Item name</th><th style="text-align:left">Value</th><th style="text-align:left">Remarks</th></tr>
</thead>
<tbody>
<tr><td style="text-align:left">_Box.Name</td><td style="text-align:left">null</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left">Name</td><td style="text-align:left">relay_odatacreate</td><td style="text-align:left">Not required</td></tr>
<tr><td style="text-align:left">EventType</td><td style="text-align:left">odata.create</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left">EventSubject</td><td style="text-align:left">null</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left">EventObject</td><td style="text-align:left">personium-localcell:/box/odatacol/entity</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left">EventInfo</td><td style="text-align:left">null</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left">EventExternal</td><td style="text-align:left">false</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left">Action</td><td style="text-align:left">relay</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left">TargetUrl</td><td style="text-align:left">personium-localunit:/otherCell/box/col/srv</td><td style="text-align:left"></td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="parameters-to-the-service-1"></a><a href="#parameters-to-the-service-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Parameters to the service</h4>
<p>The same as Script execution action.</p>
<h4><a class="anchor" aria-hidden="true" id="handling-token-on-the-service-1"></a><a href="#handling-token-on-the-service-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Handling token on the service</h4>
<p>Transcell token is set to Authorization header in order to execute this service.</p>
<table>
<thead>
<tr><th style="text-align:left">Item name</th><th style="text-align:left">Value</th></tr>
</thead>
<tbody>
<tr><td style="text-align:left">Subject</td><td style="text-align:left">Subject of the event</td></tr>
<tr><td style="text-align:left">Schema</td><td style="text-align:left">Schema of the event</td></tr>
</tbody>
</table>
<p>Please use _p.as('serviceSubject') or password authentication like _p.as({cellUrl:xxx, userId:xxx, password:xxx}).</p>
<h4><a class="anchor" aria-hidden="true" id="preparation"></a><a href="#preparation" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Preparation</h4>
<p>Need to set exec privilege to the cell that executes the service.</p>
<h3><a class="anchor" aria-hidden="true" id="event-relay-action"></a><a href="#event-relay-action" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Event relay Action</h3>
<p>Event relay action relays the event to the accept event api of other cell.
Value of Action is relay.event.</p>
<h4><a class="anchor" aria-hidden="true" id="rule-example-3"></a><a href="#rule-example-3" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Rule example</h4>
<p>When the accept event api is called and Subject matches EventSubject, relay the event to TargetUrl.</p>
<table>
<thead>
<tr><th style="text-align:left">Item name</th><th style="text-align:left">Value</th><th style="text-align:left">Remarks</th></tr>
</thead>
<tbody>
<tr><td style="text-align:left">_Box.Name</td><td style="text-align:left">null</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left">Name</td><td style="text-align:left">relayevent_eventreceipt</td><td style="text-align:left">Not required.</td></tr>
<tr><td style="text-align:left">EventType</td><td style="text-align:left">null</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left">EventSubject</td><td style="text-align:left"><a href="https://cell1.unit1.example/#account">https://cell1.unit1.example/#account</a></td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left">EventObject</td><td style="text-align:left">null</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left">EventInfo</td><td style="text-align:left">null</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left">EventExternal</td><td style="text-align:left">true</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left">Action</td><td style="text-align:left">relay.event</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left">TargetUrl</td><td style="text-align:left"><a href="https://cell2.unit1.example/">https://cell2.unit1.example/</a></td><td style="text-align:left"></td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="request"></a><a href="#request" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Request</h4>
<h5><a class="anchor" aria-hidden="true" id="request-header"></a><a href="#request-header" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Request Header</h5>
<table>
<thead>
<tr><th style="text-align:left">Header Name</th><th style="text-align:left">Value</th><th style="text-align:left">Remarks</th></tr>
</thead>
<tbody>
<tr><td style="text-align:left">X-Personium-RequestKey</td><td style="text-align:left">RequestKey of the event</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left">Authorization</td><td style="text-align:left">Transcell token<br>Subject and Schema of the event are set<br>Role list when the event was occurred is set</td><td style="text-align:left"></td></tr>
</tbody>
</table>
<h5><a class="anchor" aria-hidden="true" id="request-body"></a><a href="#request-body" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Request Body</h5>
<table>
<thead>
<tr><th style="text-align:left">Item name</th><th style="text-align:left">Value</th><th style="text-align:left">Remarks</th></tr>
</thead>
<tbody>
<tr><td style="text-align:left">Type</td><td style="text-align:left">Converted value below</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left">Object</td><td style="text-align:left">Object of the event</td><td style="text-align:left"></td></tr>
<tr><td style="text-align:left">Info</td><td style="text-align:left">Info of the event</td><td style="text-align:left"></td></tr>
</tbody>
</table>
<p>Type conversion</p>
<table>
<thead>
<tr><th style="text-align:left">External</th><th style="text-align:left">Type</th></tr>
</thead>
<tbody>
<tr><td style="text-align:left">true</td><td style="text-align:left">Insert 'relay.ext.' at the beginning.</td></tr>
<tr><td style="text-align:left">false</td><td style="text-align:left">Insert 'relay.' at the beginning.</td></tr>
</tbody>
</table>
<p>If Type starts with 'relay.', type conversion is not done.</p>
<h4><a class="anchor" aria-hidden="true" id="examples-of-relay-event"></a><a href="#examples-of-relay-event" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Examples of relay event</h4>
<p>From cell1 to cell3 via cell2.</p>
<h5><a class="anchor" aria-hidden="true" id="in-case-of-internal-event"></a><a href="#in-case-of-internal-event" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>In case of internal event</h5>
<h6><a class="anchor" aria-hidden="true" id="rules"></a><a href="#rules" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Rules</h6>
<table>
<thead>
<tr><th style="text-align:left">Item name</th><th style="text-align:left">cell1</th><th style="text-align:left">cell2</th></tr>
</thead>
<tbody>
<tr><td style="text-align:left">_Box.Name</td><td style="text-align:left">null</td><td style="text-align:left">null</td></tr>
<tr><td style="text-align:left">Name</td><td style="text-align:left">relayevent</td><td style="text-align:left">relayevent</td></tr>
<tr><td style="text-align:left">EventType</td><td style="text-align:left">cellctl</td><td style="text-align:left">null</td></tr>
<tr><td style="text-align:left">EventSubject</td><td style="text-align:left">null</td><td style="text-align:left"><a href="https://cell1.unit1.example/#account">https://cell1.unit1.example/#account</a></td></tr>
<tr><td style="text-align:left">EventObject</td><td style="text-align:left">null</td><td style="text-align:left">null</td></tr>
<tr><td style="text-align:left">EventInfo</td><td style="text-align:left">null</td><td style="text-align:left">null</td></tr>
<tr><td style="text-align:left">EventExternal</td><td style="text-align:left">false</td><td style="text-align:left">true</td></tr>
<tr><td style="text-align:left">Action</td><td style="text-align:left">relay.event</td><td style="text-align:left">relay.event</td></tr>
<tr><td style="text-align:left">TargetUrl</td><td style="text-align:left"><a href="https://cell2.unit1.example/">https://cell2.unit1.example/</a></td><td style="text-align:left"><a href="https://cell3.unit1.example/">https://cell3.unit1.example/</a></td></tr>
</tbody>
</table>
<h6><a class="anchor" aria-hidden="true" id="relayed-event-flow"></a><a href="#relayed-event-flow" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Relayed event flow</h6>
<table>
<thead>
<tr><th style="text-align:left">Item name</th><th style="text-align:left">cell1</th><th style="text-align:left">cell2</th><th style="text-align:left">cell3</th></tr>
</thead>
<tbody>
<tr><td style="text-align:left">Subject</td><td style="text-align:left"><a href="https://cell1.unit1.example/#account">https://cell1.unit1.example/#account</a></td><td style="text-align:left">&lt;-</td><td style="text-align:left">&lt;-</td></tr>
<tr><td style="text-align:left">Schema</td><td style="text-align:left"><a href="https://app-cell1.unit1.example/">https://app-cell1.unit1.example/</a></td><td style="text-align:left">&lt;-</td><td style="text-align:left">&lt;-</td></tr>
<tr><td style="text-align:left">External</td><td style="text-align:left">false</td><td style="text-align:left">true</td><td style="text-align:left">true</td></tr>
<tr><td style="text-align:left">Type</td><td style="text-align:left">cellctl.Role.create</td><td style="text-align:left">relay.cellctl.Role.create</td><td style="text-align:left">&lt;-</td></tr>
<tr><td style="text-align:left">Object</td><td style="text-align:left"><a href="https://cell1.unit1.example/__ctl/Role('role')">https://cell1.unit1.example/__ctl/Role('role')</a></td><td style="text-align:left">&lt;-</td><td style="text-align:left">&lt;-</td></tr>
<tr><td style="text-align:left">Info</td><td style="text-align:left">201,<a href="https://cell1.unit1.example/__ctl/Role">https://cell1.unit1.example/__ctl/Role</a></td><td style="text-align:left">&lt;-</td><td style="text-align:left">&lt;-</td></tr>
</tbody>
</table>
<h5><a class="anchor" aria-hidden="true" id="in-case-of-external-event"></a><a href="#in-case-of-external-event" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>In case of external event</h5>
<h6><a class="anchor" aria-hidden="true" id="rules-1"></a><a href="#rules-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Rules</h6>
<table>
<thead>
<tr><th style="text-align:left">Item name</th><th style="text-align:left">cell1</th><th style="text-align:left">cell2</th></tr>
</thead>
<tbody>
<tr><td style="text-align:left">_Box.Name</td><td style="text-align:left">null</td><td style="text-align:left">box2</td></tr>
<tr><td style="text-align:left">Name</td><td style="text-align:left">relayevent</td><td style="text-align:left">relayevent</td></tr>
<tr><td style="text-align:left">EventType</td><td style="text-align:left">null</td><td style="text-align:left">null</td></tr>
<tr><td style="text-align:left">EventSubject</td><td style="text-align:left">null</td><td style="text-align:left"><a href="https://cell1.unit1.example/#account">https://cell1.unit1.example/#account</a></td></tr>
<tr><td style="text-align:left">EventObject</td><td style="text-align:left">object</td><td style="text-align:left">null</td></tr>
<tr><td style="text-align:left">EventInfo</td><td style="text-align:left">null</td><td style="text-align:left">null</td></tr>
<tr><td style="text-align:left">EventExternal</td><td style="text-align:left">true</td><td style="text-align:left">true</td></tr>
<tr><td style="text-align:left">Action</td><td style="text-align:left">relay.event</td><td style="text-align:left">relay.event</td></tr>
<tr><td style="text-align:left">TargetUrl</td><td style="text-align:left"><a href="https://cell2.unit2.example/">https://cell2.unit2.example/</a></td><td style="text-align:left"><a href="https://cell3.unit3.example/">https://cell3.unit3.example/</a></td></tr>
</tbody>
</table>
<p>Schema of BoxB of CellB is <a href="https://app-cell1.unit1.example/">https://app-cell1.unit1.example/</a>.</p>
<h6><a class="anchor" aria-hidden="true" id="relayed-event-flow-1"></a><a href="#relayed-event-flow-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Relayed event flow</h6>
<p>| Item name cell1 | cell2 | cell3 |
|:--|:--|:--|:--|
| Subject | <a href="https://cell1.unit1.example/#account">https://cell1.unit1.example/#account</a> | &lt;- | &lt;- |
| Schema | <a href="https://app-cell1.unit1.example/">https://app-cell1.unit1.example/</a> | &lt;- | &lt;- |
| External | true | true | true |
| Type | type | relay.ext.type | &lt;- |
| Object | object | &lt;- | &lt;- |
| Info | info | &lt;- | &lt;- |</p>
<h4><a class="anchor" aria-hidden="true" id="preparation-1"></a><a href="#preparation-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Preparation</h4>
<p>Need to set event privilege to the cell that calls the accept event api.</p>
</span></div></article></div><div class="docs-prevnext"></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#event-model">Event Model</a></li><li><a href="#event-format">Event Format</a><ul class="toc-headings"><li><a href="#internal-event-definitions">Internal Event Definitions</a></li></ul></li><li><a href="#processing-events">Processing events</a><ul class="toc-headings"><li><a href="#matching-with-rule">Matching with Rule</a></li><li><a href="#log-output-action">Log output Action</a></li><li><a href="#script-execution-action">Script execution Action</a></li><li><a href="#relay-action">Relay Action</a></li><li><a href="#event-relay-action">Event relay Action</a></li></ul></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/images/favicon.ico" alt="" width="66" height="58"/></a><div><h5>Documentation</h5><a href="https://personium.io/docs/en/overview/001_Introduction.html">Introduction</a><a href="https://personium.io/docs/en/server-operator/">Server Software Operator&#x27;s Guide</a><a href="https://personium.io/docs/en/app-developer/">Application Developer&#x27;s Guide</a><a href="https://personium.io/docs/en/apiref/current/000_Rest_API_Reference.html">API Reference</a></div><div><h5>Community</h5><a href="https://personium-io.slack.com/">Slack</a><a href="https://github.com/personium">GitHub</a><a href="https://twitter.com/personium" target="_blank" rel="noreferrer noopener">Twitter</a><div class="social"><a href="https://twitter.com/personium" class="twitter-follow-button">Follow @personium</a></div></div><div><h5>More</h5><a href="/blog">News</a><a href="https://drive.google.com/drive/u/1/folders/1VWGpfCbPOLY2TCa7Lh2jbcsZ5Bp0WV4q">Draft Docs</a></div></section><a href="https://personium.io/" target="_blank" rel="noreferrer noopener" class="fbOpenSource"><img src="/img/logo-quantify-light.png" alt="Personium Project" width="170" height="45"/></a><section class="copyright">Copyright © 2020 Personium Project</section></footer></div><script>window.twttr=(function(d,s, id){var js,fjs=d.getElementsByTagName(s)[0],t=window.twttr||{};if(d.getElementById(id))return t;js=d.createElement(s);js.id=id;js.src='https://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js, fjs);t._e = [];t.ready = function(f) {t._e.push(f);};return t;}(document, 'script', 'twitter-wjs'));</script></body></html>