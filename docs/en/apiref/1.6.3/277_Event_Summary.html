<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <!-- default template -->
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>277_Event_Summary</title>
  <script type="text/javascript">
      var path = location.pathname.split('/');
      var pathRoot = [ path[0], path[1], '' ].join('/');
      var pathLang = [ path[0], path[1], path[2] , ''].join('/');

      //load style sheets
      document.write('<link rel="stylesheet" href="' + pathRoot + 'personium.css" type="text/css" />');
      document.write('<link rel="stylesheet" href="' + pathLang + 'locale.css" type="text/css" />');
      //load personium_docs.js
      var ps = document.createElement('script');
      ps.src = pathRoot + 'personium_docs.js';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(ps, s);
    
      //load apiref_versions.js
      ps2 = document.createElement('script');
      ps2.src = pathRoot + 'apiref_versions.js';
      s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(ps2, s);

  </script>
  <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
  
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
  <header>
    <nav>
    <div id="logo"><a href="/">Personium</a></div>
    <ul>
      <li class="submenu">
        <a href="" >Introduction</a>
        <ul>
            <li><a href="javascript:p.toPage('/overview/001_Introduction.html');">What's Personium?</a></li>
            <li><a href="javascript:p.toPage('/user_guide/001_Personium_Architecture.html');">Architecture</a></li>
            <li><a href="javascript:p.toPage('/user_guide/008_Glossary.html');">Glossary</a></li>
        </ul>
      </li>
      <li class="submenu">
        <a href="" >User Guide</a>
        <ul>
            <li><a href="javascript:p.toPage('/app-developer/');">for App Developer</a></li>
            <li><a href="javascript:p.toPage('/cell-client-developer/');">for Cell App Developer</a></li>
            <li><a href="javascript:p.toPage('/unit-administrator/');">for Unit Administrator</a></li>
            <li><a href="javascript:p.toPage('/server-operator/');">for Server Software Operator</a></li>
            <li><a href="javascript:p.toPage('/document-writer/');">for Documentation Contributor</a></li>
            <li><a href="javascript:p.toPage('/plugin-developer/');">for Server Plugin Developer</a></li>
            <li><a href="javascript:p.toPage('/software-developer/');">for Server Developer</a></li>
        </ul>
      </li>
      <li class="submenu">
        <a href="" >API Reference</a>
        <ul id="api-ref-list">
            <li><a href="javascript:p.toPage('/user_guide/990_Old_Version_API_Ref.html');">older versions</a></li>
        </ul>
      </li>
      <li class="submenu">
        <a href="" >Languages</a>
        <ul>
            <li><a href="javascript:p.setLang('en');">English</a></li>
            <li><a href="javascript:p.setLang('ja');">Japanese</a></li>
        </ul>
      </li>
    </ul>
    </nav>
  </header>

<div id="container">
<h1>Event model</h1>
<h2>Overview</h2>
<p>It consists of an external event defined by <a href="278_Event_Reception.html">event reception API</a> and an internal event defined within Personium.</p>
<p><img src="image/eventmodel.png" title="event model" alt="Event model" /></p>
<h4>External event</h4>
<p>Represents an event to be accepted in <a href="278_Event_Reception.html">Event reception API</a>. An event is generated by the event reception API, and the accepted event is output to the event bus. In the future, it will be possible to relay the reception of events to other cells. In case</p>
<h4>Internal Event</h4>
<p>Indicates processing that is executed based on the state of management data (OData / WebDAV / Service, etc.) held inside Personium. As a typical internal event, there is a request of Personium API. When the response of the Personium API is returned, the execution result is output as an event to the event bus.</p>
<h2>Processing events</h2>
<p>It is judged whether or not the event outputted to the event bus matches the condition of the rule, and if it matches, the action described in the rule is executed. For the action, you can specify:</p>
<ul>
<li>Log output</li>
<li>Script execution</li>
<li>Event relay</li>
</ul>
<h3>Event log format</h3>
<p>The output format is as follows.</p>
<pre><code>{dateTime},[{level}],{RequestKey},{external},{schema},{subject},{type},{object},{info}</code></pre>
<h3>Event log access method</h3>
<p>Since the event log is managed on the WebDAV, access to the event log file is done with the API for WebDAV.</p>
<ul>
<li><a href="284_Retrieve_Log_File_list.html">Get log file list</a></li>
<li><a href="285_Retrieve_Log_File.html">Get log file</a></li>
<li><a href="286_Delete_Log_File.html">Delete Log File</a></li>
</ul>
<h3>Event log retention period</h3>
<p>Since the size of the event log file increases according to the event amount, the event log file is rotated by a fixed amount. The number of generation generations of the rotated event log file is 12 generations maximum. The maximum size at rotation is set to 50 MB by default, and it can be set by the log setting update API.</p>
<h3>Output example</h3>
<h4>External event output example</h4>
<pre><code>2013-04-18T14:52:39.778Z,[ERROR],&quot;Req_animal-access_1001&quot;,&quot;true&quot;,
&quot;https://{UnitFQDN}/appCell/&quot;,&quot;https://{UnitFQDN}/servicemanager/#admin&quot;,&quot;actionData&quot;,
&quot;/svc/token_keeper&quot;,&quot;resultData&quot;
2013-04-18T14:52:40.688Z,[INFO ],&quot;Req_animal-access_2001&quot;,&quot;true&quot;,
&quot;https://{UnitFQDN}/appCell/&quot;,&quot;https://{UnitFQDN}/servicemanager/#admin&quot;,&quot;action&quot;,
&quot;/svc/token_keeper&quot;,&quot;result&quot;
2013-04-18T15:01:46.994Z,[INFO ],&quot;Req_animal-access_2001&quot;,&quot;true&quot;,
&quot;https://{UnitFQDN}/appCell/&quot;,&quot;https://{UnitFQDN}/servicemanager/#admin&quot;,&quot;action&quot;,
&quot;/svc/token_keeper&quot;,&quot;result&quot;
2013-04-18T15:06:19.294Z,[ERROR],&quot;Req_animal-access_1001&quot;,&quot;true&quot;,
&quot;https://{UnitFQDN}/appCell/&quot;,&quot;https://{UnitFQDN}/servicemanager/#admin&quot;,&quot;actionData&quot;,
&quot;/svc/token_keeper&quot;,&quot;resultData&quot;
2013-04-18T15:06:23.360Z,[INFO ],&quot;Req_animal-access_2001&quot;,&quot;true&quot;,
&quot;https://{UnitFQDN}/appCell/&quot;,&quot;https://{UnitFQDN}/servicemanager/#admin&quot;,&quot;action&quot;,
&quot;/svc/token_keeper&quot;,&quot;result&quot;
2013-04-18T15:09:18.073Z,[ERROR],&quot;Req_animal-access_1001&quot;,&quot;true&quot;,
&quot;https://{UnitFQDN}/appCell/&quot;,&quot;https://{UnitFQDN}/servicemanager/#admin&quot;,&quot;actionData&quot;,
&quot;/svc/token_keeper&quot;,&quot;resultData&quot;</code></pre>
<h4>Example of internal event output</h4>
<pre><code>2013-04-18T14:52:39.779Z,[INFO ],&quot;Req_animal-access_1001&quot;,&quot;false&quot;,
&quot;https://{UnitFQDN}/appCell/&quot;,&quot;https://{UnitFQDN}/appCell/#staff&quot;,&quot;odata.update&quot;,
&quot;https://{UnitFQDN}/homeClinic/box/col/put_blog&quot;,&quot;204&quot;
2013-04-18T14:52:39.780Z,[INFO ],&quot;Req_animal-access_1001&quot;,&quot;false&quot;,
&quot;https://{UnitFQDN}/appCell/&quot;,&quot;https://{UnitFQDN}/appCell/#staff&quot;,&quot;odata.get&quot;,
&quot;https://{UnitFQDN}/homeClinic/box/col/blog_20130418&quot;,&quot;200&quot;</code></pre>
</div>
  <footer><nav>The Personium project is provided under the Apache 2.0 license. </nav></footer>
</body>
</html>
